<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Xmake v2.8.6 released, New Packaging Plugin: XPack</title>
    <meta name="description" content="Xmake is a lightweight cross-platform build utility based on Lua.It is very lightweight and has no dependencies because it has a built-in Lua runtime.It uses...">

    
    <meta name="keywords" content="xmake,lua,C/C++,package,performance,API,rust,tboox" />

    <!-- qq oauth -->
    <meta property="qc:admins" content="5211601217706727767255" />

    <!--icon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" sizes="192x192" href="/static/img/nice-highres.png" />
	<link rel="apple-touch-icon-precomposed" href="/static/img/apple-touch-icon-57x57-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/img/apple-touch-icon-72x72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/img/apple-touch-icon-114x114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/img/apple-touch-icon-144x144-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="/static/img/retinahd_icon.png" />
	<meta name="msapplication-TileImage" content="/static/img/retinahd_icon.png" />

    <link rel="stylesheet" href=" /css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="https://tboox.org/2023/12/15/xmake-update-v2.8.6/">
    <link rel="alternate" type="application/rss+xml" title="TBOOX Open Source Project" href="https://tboox.org/feed.xml ">
    <link rel="alternate" hreflang="en" href="https://tboox.org/" />
    <link rel="alternate" hreflang="zh-Hans" href="https://tboox.org/cn/" />




    <script type="text/javascript">
    function isPC(){
        var userAgentInfo = navigator.userAgent;
        var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");
        var flag = true;
        for (var v = 0; v < Agents.length; v++) {
            if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }
        }
        return flag;
    }
    </script>

<!-- wwads -->

    <script type="text/javascript" charset="UTF-8" src="https://cdn.wwads.cn/js/makemoney.js" async></script>


<!-- baidu ads -->



    <!-- baidu ads -->

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">TBOOX</a>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/cn?lang=0">
                    
                        <i class="fa fa-home"></i>中文
                    </a>
                </li>

                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/project/">
                            
                        
                            <i class="fa fa-bookmark"></i>Projects
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/archive/">
                            
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/category/">
                            
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/tag/">
                            
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/404.html/">
                            
                        
                            <i class="fa fa-heart"></i>捐助
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/docs/">
                            
                        
                            <i class="fa fa-book"></i>Documents
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="https://xmake.io/#/about/contact" target="_blank" >
                            
                        
                            <i class="fa fa-forumbee"></i>Community
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/donation/">
                            
                        
                            <i class="fa fa-heart"></i>Donate
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/about/">
                            
                        
                            <i class="fa fa-user"></i>About
                        </a>
                    </li>
                    
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                     
                     
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>



        <div class="page clearfix" post>
    <div class="left">
        <h1>Xmake v2.8.6 released, New Packaging Plugin: XPack</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2023-12-15
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#xmake" title="Category: xmake" rel="category">xmake</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a-->
        <a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a>&nbsp;
    
        <!--a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a-->
        <a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a>&nbsp;
    
        <!--a href="/tag/#C%2FC%2B%2B" title="Tag: C/C++" rel="tag">C/C++</a-->
        <a href="/tag/#C/C++" title="Tag: C/C++" rel="tag">C/C++</a>&nbsp;
    
        <!--a href="/tag/#package" title="Tag: package" rel="tag">package</a-->
        <a href="/tag/#package" title="Tag: package" rel="tag">package</a>&nbsp;
    
        <!--a href="/tag/#performance" title="Tag: performance" rel="tag">performance</a-->
        <a href="/tag/#performance" title="Tag: performance" rel="tag">performance</a>&nbsp;
    
        <!--a href="/tag/#API" title="Tag: API" rel="tag">API</a-->
        <a href="/tag/#API" title="Tag: API" rel="tag">API</a>&nbsp;
    
        <!--a href="/tag/#rust" title="Tag: rust" rel="tag">rust</a-->
        <a href="/tag/#rust" title="Tag: rust" rel="tag">rust</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <p><a href="https://github.com/xmake-io/xmake">Xmake</a> is a lightweight cross-platform build utility based on Lua.</p>

<p>It is very lightweight and has no dependencies because it has a built-in Lua runtime.</p>

<p>It uses xmake.lua to maintain project builds and its configuration syntax is very simple and readable.</p>

<p>We can use it to build project directly like Make/Ninja, or generate project files like CMake/Meson, and it also has a built-in package management system to help users solve the integrated use of C/C++ dependent libraries.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake = Build backend + Project Generator + Package Manager + [Remote|Distributed] Build + Cache
</code></pre>
</div>

<p>Although not very precise, we can still understand Xmake in the following way:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake ≈ Make/Ninja + CMake/Meson + Vcpkg/Conan + distcc + ccache/sccache
</code></pre>
</div>

<ul>
  <li><a href="https://github.com/xmake-io/xmake">Github</a></li>
  <li><a href="https://xmake.io/">Document</a></li>
</ul>

<h2 id="introduction-of-new-features">Introduction of new features</h2>

<p>Before introducing new features, there is good news to tell you that the previous version of Xmake was included in the debian repository, and recently Xmake has entered the Fedora official repository. You can install Xmake directly on Fedora 39 through the following command.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo dnf install xmake
</code></pre>
</div>

<p>Many thanks to @topazus @mochaaP for their contribution to Xmake. For related information, see: <a href="https://github.com/xmake-io/xmake/issues/941">#941</a>.</p>

<p>Next, let’s introduce the heavyweight feature brought by the new version: XPack.</p>

<p>It is similar to CMake’s CPack command, which can quickly package user projects to generate installation packages in various formats.</p>

<p>Currently Xmake’s XPack already supports packaging in the following formats:</p>

<ul>
  <li>nsis: executable installation package under Windows</li>
  <li>runself: shell self-compiled installation package</li>
  <li>targz: binary file tar.gz package (green version)</li>
  <li>zip: Binary file zip package (green version)</li>
  <li>srctargz: source file tar.gz package</li>
  <li>srczip: source file zip package</li>
  <li>srpm: rpm source code installation package</li>
  <li>rpm: rpm binary installation package</li>
</ul>

<p>In addition to the above-mentioned supported packaging formats, package formats such as deb are also being gradually supported, and users can also configure and generate custom package format files.</p>

<h3 id="xpack-packaging">XPack packaging</h3>

<p>Here is a complete example, we can take a brief look at it first:</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">set_version</span><span class="p">(</span><span class="s2">"1.0.0"</span><span class="p">)</span>
<span class="n">add_rules</span><span class="p">(</span><span class="s2">"mode.debug"</span><span class="p">,</span> <span class="s2">"mode.release"</span><span class="p">)</span>

<span class="n">includes</span><span class="p">(</span><span class="s2">"@builtin/xpack"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
     <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>

<span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"nsis"</span><span class="p">,</span> <span class="s2">"zip"</span><span class="p">,</span> <span class="s2">"targz"</span><span class="p">,</span> <span class="s2">"runself"</span><span class="p">)</span>
     <span class="n">set_title</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">)</span>
     <span class="n">set_author</span><span class="p">(</span><span class="s2">"ruki"</span><span class="p">)</span>
     <span class="n">set_description</span><span class="p">(</span><span class="s2">"A test installer."</span><span class="p">)</span>
     <span class="n">set_homepage</span><span class="p">(</span><span class="s2">"https://xmake.io"</span><span class="p">)</span>
     <span class="n">set_licensefile</span><span class="p">(</span><span class="s2">"LICENSE.md"</span><span class="p">)</span>
     <span class="n">add_targets</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">add_installfiles</span><span class="p">(</span><span class="s2">"src/(assets/*.png)"</span><span class="p">,</span> <span class="p">{</span><span class="n">prefixdir</span> <span class="o">=</span> <span class="s2">"images"</span><span class="p">})</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"(src/**)"</span><span class="p">)</span>
     <span class="n">set_iconfile</span><span class="p">(</span><span class="s2">"src/assets/xmake.ico"</span><span class="p">)</span>

     <span class="n">after_installcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">mkdir</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">installdir</span><span class="p">(</span><span class="s2">"resources"</span><span class="p">))</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">cp</span><span class="p">(</span><span class="s2">"src/assets/*.txt"</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span><span class="n">installdir</span><span class="p">(</span><span class="s2">"resources"</span><span class="p">),</span> <span class="p">{</span><span class="n">rootdir</span> <span class="o">=</span> <span class="s2">"src"</span><span class="p">})</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">mkdir</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">installdir</span><span class="p">(</span><span class="s2">"stub"</span><span class="p">))</span>
     <span class="k">end</span><span class="p">)</span>

     <span class="n">after_uninstallcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">rmdir</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">installdir</span><span class="p">(</span><span class="s2">"resources"</span><span class="p">))</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">rmdir</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">installdir</span><span class="p">(</span><span class="s2">"stub"</span><span class="p">))</span>
     <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>We introduce all configuration interfaces of xpack through <code class="highlighter-rouge">includes("@builtin/xpack")</code>, including the xpack configuration domain and all its domain interfaces.</p>

<p>Then we execute:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nv">$xmakepack</span>
</code></pre>
</div>

<p>All installation packages will be generated.</p>

<h3 id="generate-nsis-installation-package">Generate NSIS installation package</h3>

<p>As long as you configure the <code class="highlighter-rouge">set_formats("nsis")</code> format and then execute the <code class="highlighter-rouge">xmake pack</code> command, you can generate an installation package in NSIS format.</p>

<p>In addition, xmake will also automatically install the tools required to generate NSIS packages to achieve true one-click packaging.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nv">$xmakepack</span>
note: install or modify <span class="o">(</span>m<span class="o">)</span> these packages <span class="o">(</span>pass -y to skip confirm<span class="o">)</span>?
<span class="k">in </span>xmake-repo:
   -&gt; nsis 3.09
please input: y <span class="o">(</span>y/n/m<span class="o">)</span>

   <span class="o">=</span>&gt; install nsis 3.09 .. ok

<span class="o">[</span>25%]: compiling.release src<span class="se">\m</span>ain.cpp
<span class="o">[</span>37%]: compiling.release src<span class="se">\m</span>ain.cpp
<span class="o">[</span>50%]: linking.release foo.dll
<span class="o">[</span>62%]: linking.release test.exe
packing build<span class="se">\x</span>pack<span class="se">\t</span>est<span class="se">\t</span>est-windows-x64-v1.0.0.exe
pack ok
</code></pre>
</div>

<p><code class="highlighter-rouge">test-windows-x64-v1.0.0.exe</code> is the installation package we generated. Double-click to run it to install our binary files to the specified directory.</p>

<p><img src="https://xmake.io/assets/img/manual/nsis_1.png" alt="" />
<img src="https://xmake.io/assets/img/manual/nsis_2.png" alt="" />
<img src="https://xmake.io/assets/img/manual/nsis_3.png" alt="" /></p>

<h4 id="add-component-installation">Add component installation</h4>

<p>We can also add component installation commands to NSIS. Only when the user selects the specified component, its installation command will be executed.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">add_components</span><span class="p">(</span><span class="s2">"LongPath"</span><span class="p">)</span>

<span class="n">xpack_component</span><span class="p">(</span><span class="s2">"LongPath"</span><span class="p">)</span>
     <span class="n">set_default</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
     <span class="n">set_title</span><span class="p">(</span><span class="s2">"Enable Long Path"</span><span class="p">)</span>
     <span class="n">set_description</span><span class="p">(</span><span class="s2">"Increases the maximum path length limit, up to 32,767 characters (before 256)."</span><span class="p">)</span>
     <span class="n">on_installcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">rawcmd</span><span class="p">(</span><span class="s2">"nsis"</span><span class="p">,</span> <span class="s">[[
   ${If} $NoAdmin == "false"
     ; Enable long path
     WriteRegDWORD ${HKLM} "SYSTEM\CurrentControlSet\Control\FileSystem" "LongPathsEnabled" 1
   ${EndIf}]]</span><span class="p">)</span>
     <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>In this example, we added an NSIS-specific custom command to support long paths.</p>

<p><img src="https://xmake.io/assets/img/manual/nsis_4.png" alt="" /></p>

<h3 id="generate-self-installation-package">Generate self-installation package</h3>

<p>We can also generate self-compiled installation packages based on shell scripts. We need to configure the runself packaging format, and then add the source files that need to participate in compilation and installation through <code class="highlighter-rouge">add_sourcefiles</code>.</p>

<p>Next, we need to customize the on_installcmd installation script to configure if we compile the source code package, we can simply call a built-in compilation and installation script file, or directly configure compilation and installation commands such as <code class="highlighter-rouge">make install</code>.</p>

<p>For example:</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"runself"</span><span class="p">)</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"(src/**)"</span><span class="p">)</span>
     <span class="n">on_installcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">runv</span><span class="p">(</span><span class="s2">"make"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"install"</span><span class="p">})</span>
     <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>Then, we execute the <code class="highlighter-rouge">xmake pack</code> command to generate a self-installed xxx.gz.run package, which uses gzip compression by default.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nv">$xmakepack</span>
packing build/xpack/test/test-macosx-src-v1.0.0.gz.run
pack ok
</code></pre>
</div>

<p>We can use sh to load and run it to install our program.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sh ./build/xpack/test/test-macosx-src-v1.0.0.gz.run
</code></pre>
</div>

<p>We can also look at a more complete example:</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"xmakesrc"</span><span class="p">)</span>
     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"runself"</span><span class="p">)</span>
     <span class="n">set_basename</span><span class="p">(</span><span class="s2">"xmake-v$(version)"</span><span class="p">)</span>
     <span class="n">set_prefixdir</span><span class="p">(</span><span class="s2">"xmake-$(version)"</span><span class="p">)</span>
     <span class="n">before_package</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">)</span>
         <span class="n">import</span><span class="p">(</span><span class="s2">"devel.git"</span><span class="p">)</span>

         <span class="kd">local</span> <span class="n">rootdir</span> <span class="o">=</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">tmpfile</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">basename</span><span class="p">())</span> <span class="o">..</span> <span class="s2">".dir"</span><span class="p">,</span> <span class="s2">"repo"</span><span class="p">)</span>
         <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">)</span> <span class="k">then</span>
             <span class="n">os</span><span class="p">.</span><span class="n">tryrm</span><span class="p">(</span><span class="n">rootdir</span><span class="p">)</span>
             <span class="n">os</span><span class="p">.</span><span class="n">cp</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">directory</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">projectdir</span><span class="p">()),</span> <span class="n">rootdir</span><span class="p">)</span>

             <span class="n">git</span><span class="p">.</span><span class="n">clean</span><span class="p">({</span><span class="n">repodir</span> <span class="o">=</span> <span class="n">rootdir</span><span class="p">,</span> <span class="n">force</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">all</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
             <span class="n">git</span><span class="p">.</span><span class="n">reset</span><span class="p">({</span><span class="n">repodir</span> <span class="o">=</span> <span class="n">rootdir</span><span class="p">,</span> <span class="n">hard</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
             <span class="k">if</span> <span class="n">os</span><span class="p">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">".gitmodules"</span><span class="p">))</span> <span class="k">then</span>
                 <span class="n">git</span><span class="p">.</span><span class="n">submodule</span><span class="p">.</span><span class="n">clean</span><span class="p">({</span><span class="n">repodir</span> <span class="o">=</span> <span class="n">rootdir</span><span class="p">,</span> <span class="n">force</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">all</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
                 <span class="n">git</span><span class="p">.</span><span class="n">submodule</span><span class="p">.</span><span class="n">reset</span><span class="p">({</span><span class="n">repodir</span> <span class="o">=</span> <span class="n">rootdir</span><span class="p">,</span> <span class="n">hard</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
             <span class="k">end</span>
         <span class="k">end</span>

         <span class="kd">local</span> <span class="n">extraconf</span> <span class="o">=</span> <span class="p">{</span><span class="n">rootdir</span> <span class="o">=</span> <span class="n">rootdir</span><span class="p">}</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"core/**|src/pdcurses/**|src/luajit/**|src/tbox/tbox/src/demo/**"</span><span class="p">),</span> <span class="n">extraconf</span> <span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"xmake/**"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"*.md"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"configure"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"scripts/*.sh"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"scripts/man/**"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"scripts/debian/**"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
         <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"sourcefiles"</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s2">"scripts/msys/**"</span><span class="p">),</span> <span class="n">extraconf</span><span class="p">)</span>
     <span class="k">end</span><span class="p">)</span>

     <span class="n">on_installcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">runv</span><span class="p">(</span><span class="s2">"./scripts/get.sh"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"__local__"</span><span class="p">})</span>
     <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>It is the installation package configuration script of xmake’s own source code. For more complete configuration, please refer to: <a href="https://github.com/xmake-io/xmake/blob/master/core/xpack.lua">xpack.lua</a></p>

<p>Here, it performs compilation and installation by calling the <code class="highlighter-rouge">./scripts/get.sh</code> installation script built into the source package.</p>

<h3 id="generate-source-code-archive-package">Generate source code archive package</h3>

<p>In addition, we can also configure the <code class="highlighter-rouge">srczip</code> and <code class="highlighter-rouge">srctargz</code> formats to generate source code compression packages. It is not a complete installation package and has no installation commands. It is only used for source code package distribution.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"srczip"</span><span class="p">,</span> <span class="s2">"srctargz"</span><span class="p">)</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"(src/**)"</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nv">$xmakepack</span>
packing build/xpack/test/test-macosx-src-v1.0.0.zip ..
packing build/xpack/test/test-macosx-src-v1.0.0.tar.gz ..
pack ok
</code></pre>
</div>

<h3 id="generate-binary-archive-package">Generate binary archive package</h3>

<p>We can also configure <code class="highlighter-rouge">zip</code> and <code class="highlighter-rouge">targz</code> to generate binary compressed packages. It will automatically compile all bound target target programs and package all required binary programs and library files into zip/tar.gz format.</p>

<p>This is usually used to create a green version of the installation package. There is no automatic installation script inside. Users need to set environment variables such as PATH themselves.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"zip"</span><span class="p">,</span> <span class="s2">"targz"</span><span class="p">)</span>
     <span class="n">add_installfiles</span><span class="p">(</span><span class="s2">"(src/**)"</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nv">$xmakepack</span>
packing build/xpack/test/test-macosx-v1.0.0.zip ..
packing build/xpack/test/test-macosx-v1.0.0.tar.gz ..
pack ok
</code></pre>
</div>

<p>!&gt; It should be noted that to add binary files to the package, use <code class="highlighter-rouge">add_installfiles</code> instead of <code class="highlighter-rouge">add_sourcefiles</code>.</p>

<p>We can also use <code class="highlighter-rouge">add_targets</code> to bind the target target programs and libraries that need to be installed. See the interface description for <code class="highlighter-rouge">add_targets</code> below for more details.</p>

<h3 id="generate-srpm-source-code-installation-package">Generate SRPM source code installation package</h3>

<p>It can generate source code installation packages in <code class="highlighter-rouge">.src.rpm</code> format.</p>

<p>We can configure add_targets to associate the targets that need to be built. In the generated srpm package, it will automatically call <code class="highlighter-rouge">xmake build</code> and <code class="highlighter-rouge">xmake install</code> to build and install the package.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_homepage</span><span class="p">(</span><span class="s2">"https://xmake.io"</span><span class="p">)</span>
     <span class="n">set_license</span><span class="p">(</span><span class="s2">"Apache-2.0"</span><span class="p">)</span>
     <span class="n">set_description</span><span class="p">(</span><span class="s2">"A cross-platform build utility based on Lua."</span><span class="p">)</span>

     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"srpm"</span><span class="p">)</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"(src/**)"</span><span class="p">)</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"./xmake.lua"</span><span class="p">)</span>

     <span class="n">add_targets</span><span class="p">(</span><span class="s2">"demo"</span><span class="p">)</span>
</code></pre>
</div>

<p>It will generate a spec file similar to the following, and then automatically call rpmbuild to generate the <code class="highlighter-rouge">.src.rpm</code> package.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Name: test
Version: 1.0.0
Release: 1%{?dist}
Summary: hello

License: Apache-2.0
URL: https://xmake.io
Source0: test-linux-src-v1.0.0.tar.gz

BuildRequires: xmake
BuildRequires: gcc
BuildRequires: gcc-c++

%description
A test installer.

%prep
%autosetup -n test-1.0.0 -p1

%build
xmake build -y test

%install
xmake install -o %{buildroot}/%{_exec_prefix} test
cd %{buildroot}
find . -type f | sed 's!^\./!/!' &gt; %{_builddir}/_installedfiles.txt

%check

%files -f %{_builddir}/_installedfiles.txt

%changelog
* Fri Dec 22 2023 ruki - 1.0.0-1
- Update to 1.0.0
</code></pre>
</div>

<p>We can also customize build and installation scripts through <code class="highlighter-rouge">on_buildcmd</code> and <code class="highlighter-rouge">on_installcmd</code>.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_homepage</span><span class="p">(</span><span class="s2">"https://xmake.io"</span><span class="p">)</span>
     <span class="n">set_license</span><span class="p">(</span><span class="s2">"Apache-2.0"</span><span class="p">)</span>
     <span class="n">set_description</span><span class="p">(</span><span class="s2">"A cross-platform build utility based on Lua."</span><span class="p">)</span>

     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"srpm"</span><span class="p">)</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"(src/**)"</span><span class="p">)</span>
     <span class="n">add_sourcefiles</span><span class="p">(</span><span class="s2">"./configure"</span><span class="p">)</span>

     <span class="n">on_buildcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">runv</span><span class="p">(</span><span class="s2">"./configure"</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">runv</span><span class="p">(</span><span class="s2">"make"</span><span class="p">)</span>
     <span class="k">end</span><span class="p">)</span>

     <span class="n">on_installcmd</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">batchcmds</span><span class="p">)</span>
         <span class="n">batchcmds</span><span class="p">:</span><span class="n">runv</span><span class="p">(</span><span class="s2">"make"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"install"</span><span class="p">,</span> <span class="s2">"PREFIX=%{buildroot}"</span><span class="p">})</span>
     <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="generate-rpm-binary-installation-package">Generate RPM binary installation package</h3>

<p>The RPM package will directly generate a compiled binary installation package. xmake will automatically call the <code class="highlighter-rouge">rpmbuild --rebuild</code> command to build the SRPM package and generate it.</p>

<p>In XPack, we only need to configure <code class="highlighter-rouge">set_formats("rpm")</code> to support rpm package generation, and other configurations are exactly the same as srpm packages.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">xpack</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
     <span class="n">set_formats</span><span class="p">(</span><span class="s2">"rpm"</span><span class="p">)</span>
     <span class="c1">-- TODO</span>
</code></pre>
</div>

<h3 id="packaging-command-parameters">Packaging command parameters</h3>

<h4 id="specify-packaging-format">Specify packaging format</h4>

<p>If we have configured multiple packaging formats using <code class="highlighter-rouge">set_formats</code> in the configuration file, then <code class="highlighter-rouge">xmake pack</code> will automatically generate packages for all these formats by default.</p>

<p>Of course, we can also use <code class="highlighter-rouge">xmake pack --formats=nsis,targz</code> to selectively specify which formats of packages currently need to be packaged.</p>

<h4 id="modify-the-package-file-name">Modify the package file name</h4>

<p>We can modify the package name through <code class="highlighter-rouge">set_basename()</code> in the configuration file, or we can modify it through the command line.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake pack --basename<span class="o">=</span><span class="s2">"foo"</span>
packing build/xpack/test/foo.zip ..
pack ok
</code></pre>
</div>

<h4 id="specify-output-directory">Specify output directory</h4>

<p>The default output directory is in the build directory, but we can also modify the output path.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake pack -o /tmp/output
</code></pre>
</div>

<h4 id="disable-automatic-build">Disable automatic build</h4>

<p>If you are building a binary package such as NSIS, <code class="highlighter-rouge">xmake pack</code> will automatically compile all bound target files first, and then execute the packaging logic.</p>

<p>But if we have already compiled it and don’t want to compile it every time, but package it directly, we can disable automatic building through the following parameters.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake pack --autobuild<span class="o">=</span>n
</code></pre>
</div>

<h3 id="interface-description">Interface description</h3>

<p>For more descriptions of the XPack packaging interface, see: <a href="https://xmake.io/#/zh-cn/manual/xpack">XPack Packaging Interface Document</a>.</p>

<h3 id="install-the-package-locally">Install the package locally</h3>

<p>By default, packages configured through <code class="highlighter-rouge">add_requires("xxx")</code> will be installed in the global directory, and different projects share these packages.</p>

<p>In the new version, we have added a <code class="highlighter-rouge">package.install_locally</code> strategy, which can be configured to let xmake install the package to the current local project directory.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.install_locally"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="changelog">Changelog</h2>

<h3 id="new-features">New features</h3>

<ul>
  <li>Add <code class="highlighter-rouge">network.mode</code> policy</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/1433">#1433</a>: Add <code class="highlighter-rouge">xmake pack</code> command to generate NSIS/zip/tar.gz/rpm/srpm/runself packages like cmake/cpack</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/4435">#4435</a>: Support batchsize for UnityBuild in Group Mode</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/4485">#4485</a>: Support package.install_locally</li>
  <li>Support NetBSD</li>
</ul>

<h3 id="changes">Changes</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/pull/4484">#4484</a>: Improve swig rule</li>
  <li>Improve Haiku support</li>
</ul>

<h3 id="bugs-fixed">Bugs fixed</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/4372">#4372</a>: Fix protobuf rules</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/4439">#4439</a>: Fix asn1c rules</li>
</ul>


        </article>
        <hr>

        <!-- wwads -->
        
        <div class="wwads-cn wwads-horizontal" data-id="243" style="max-width:100%"></div>
        

        <!-- baidu ads -->
        

        
        
            
        
            
            
                
            
        
            
        
            
            
                
                    
                    <h2 id="chinese">中文</h2>
                    <ul>
                    
                    <li class="relatedPost">
                        <a href="/cn/2023/12/15/xmake-update-v2.8.6/">Xmake v2.8.6 发布，新的打包插件：XPack
                        
                        </a>
                    </li>
                    
                    
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
        
            </ul>
        

        
        
            
            
            
                
                    
                        
                        <h2 id="similar_posts">Similar Posts</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="/2024/02/25/xmake-update-v2.8.7/">Xmake v2.8.7 released, Add cosmocc toolchain support, build-once run-anywhere
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2023/11/05/xmake-update-v2.8.5/">Xmake v2.8.5 released, Support for link sorting and unit testing
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2023/09/26/xmake-update-v2.8.3/">Xmake v2.8.3 Released, Improve Wasm and Support Xmake Source Debugging
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2023/08/22/xmake-update-v2.8.2/">Xmake v2.8.2 Released, Official package repository count over 1k
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2023/07/11/xmake-update-v2.8.1/">Xmake v2.8.1 Released, Lots of Detailed Feature Improvements
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">

        

        

        
        
        

        

        

        
        
        <p><strong>Prev Post</strong> <a href="/2023/11/05/xmake-update-v2.8.5/">Xmake v2.8.5 released, Support for link sorting and unit testing</a></p>
        
    </div>

    <div class="nex">

        

        

        
        
        

        

        

        
        
        <p><strong>Next Post</strong> <a href="/2024/02/25/xmake-update-v2.8.7/">Xmake v2.8.7 released, Add cosmocc toolchain support, build-once run-anywhere</a></p>
        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        









    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#chinese">中文</a></li>
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>

            <!-- wwads -->
            
            <div class="side">
            <div class="wwads-cn wwads-vertical" data-id="243" style="max-width:255px;height:250px"></div>
            </div>
            

            <!-- baidu ads -->
            

            <br>
            <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul class="content-ul">
                  <li><a href="http://github.com/waruqi/tbox">tbox</a></li>
                  <li><a href="http://www.xmake.io">xmake</a></li>
                  <li><a href="https://github.com/waruqi">github</a></li>
                </ul>
            </div>

            <!-- google ads -->
            

            <!-- baidu ads -->
            

            <!-- chitika ads -->
            
        </div>
    </div>

    <!-- baidu ads -->
    
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>



    <footer class="site-footer">
    <div class="wrapper">
        <p class="description">
             Copyright (c) 2016-latest tboox.org 
        </p>
        <p class="contact">
            
            <a href="https://github.com/waruqi" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a> 
             
            
            <a href="mailto:waruqi@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a> 
            
            
            <a href="https://twitter.com/waruqi" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a> 
            
            <a href="/feed.xml" title="feed"><i class="fa fa-feed" aria-hidden="true"></i></a> 
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/Gaohaoyang">HyG</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
        </p>
    </div>
</footer>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
