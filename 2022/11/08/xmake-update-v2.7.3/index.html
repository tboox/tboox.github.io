<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Xmake v2.7.3 Released, Package Components and C++ Modules Incremental Build Support</title>
    <meta name="description" content="Xmake is a lightweight cross-platform build utility based on Lua.It is very lightweight and has no dependencies because it has a built-in Lua runtime.It uses...">

    
    <meta name="keywords" content="xmake,lua,C/C++,package,components,tboox" /> 

    <!-- qq oauth -->
    <meta property="qc:admins" content="5211601217706727767255" />

    <!--icon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" sizes="192x192" href="/static/img/nice-highres.png" />
	<link rel="apple-touch-icon-precomposed" href="/static/img/apple-touch-icon-57x57-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/img/apple-touch-icon-72x72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/img/apple-touch-icon-114x114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/img/apple-touch-icon-144x144-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="/static/img/retinahd_icon.png" />
	<meta name="msapplication-TileImage" content="/static/img/retinahd_icon.png" />
	
    <link rel="stylesheet" href=" /css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="https://tboox.org/2022/11/08/xmake-update-v2.7.3/">
    <link rel="alternate" type="application/rss+xml" title="TBOOX Open Source Project" href="https://tboox.org/feed.xml ">
    <link rel="alternate" hreflang="en" href="https://tboox.org/" />
    <link rel="alternate" hreflang="zh-Hans" href="https://tboox.org/cn/" />




    <script type="text/javascript">
    function isPC(){    
        var userAgentInfo = navigator.userAgent;  
        var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");    
        var flag = true;    
        for (var v = 0; v < Agents.length; v++) {    
            if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }    
        }    
        return flag;    
    }
    </script>

<!-- baidu ads -->



    <!-- baidu ads -->

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">TBOOX</a>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/cn?lang=0">
                    
                        <i class="fa fa-home"></i>中文
                    </a>
                </li>

                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/project/">
                            
                        
                            <i class="fa fa-bookmark"></i>Projects
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/archive/">
                            
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/category/">
                            
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/tag/">
                            
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                    
                    
                
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/docs/">
                            
                        
                            <i class="fa fa-book"></i>Documents
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="https://xmake.io/#/about/contact" target="_blank" >
                            
                        
                            <i class="fa fa-forumbee"></i>Community
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/donation/">
                            
                        
                            <i class="fa fa-heart"></i>Donate
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/about/">
                            
                        
                            <i class="fa fa-user"></i>About
                        </a>
                    </li>
                    
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                     
                     
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>



        <div class="page clearfix" post>
    <div class="left">
        <h1>Xmake v2.7.3 Released, Package Components and C++ Modules Incremental Build Support</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2022-11-08
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#xmake" title="Category: xmake" rel="category">xmake</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a-->
        <a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a>&nbsp;
    
        <!--a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a-->
        <a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a>&nbsp;
    
        <!--a href="/tag/#C%2FC%2B%2B" title="Tag: C/C++" rel="tag">C/C++</a-->
        <a href="/tag/#C/C++" title="Tag: C/C++" rel="tag">C/C++</a>&nbsp;
    
        <!--a href="/tag/#package" title="Tag: package" rel="tag">package</a-->
        <a href="/tag/#package" title="Tag: package" rel="tag">package</a>&nbsp;
    
        <!--a href="/tag/#components" title="Tag: components" rel="tag">components</a-->
        <a href="/tag/#components" title="Tag: components" rel="tag">components</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <p><a href="https://github.com/xmake-io/xmake">Xmake</a> is a lightweight cross-platform build utility based on Lua.</p>

<p>It is very lightweight and has no dependencies because it has a built-in Lua runtime.</p>

<p>It uses xmake.lua to maintain project builds and its configuration syntax is very simple and readable.</p>

<p>We can use it to build project directly like Make/Ninja, or generate project files like CMake/Meson, and it also has a built-in package management system to help users solve the integrated use of C/C++ dependent libraries.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake = Build backend + Project Generator + Package Manager + [Remote|Distributed] Build + Cache
</code></pre>
</div>

<p>Although not very precise, we can still understand Xmake in the following way:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake ~= Make/Ninja + CMake/Meson + Vcpkg/Conan + distcc + ccache/sccache
</code></pre>
</div>

<ul>
  <li><a href="https://github.com/xmake-io/xmake">Github</a></li>
  <li><a href="https://xmake.io/">Document</a></li>
</ul>

<p><img src="https://xmake.io/assets/img/index/package.gif" width="650px" /></p>

<h2 id="introduction-of-new-features">Introduction of new features</h2>

<h3 id="package-component-support">Package component support</h3>

<h4 id="introduction">Introduction</h4>

<p>This new feature is intended to enable the integration of specific sub-libraries from a C/C++ package, and is generally used for library component integration in larger packages.</p>

<p>This is because such packages provide a number of sub-libraries, not all of which are required by the user, and linking them all may be problematic.</p>

<p>Although, previous versions were able to support the feature of sublibrary selection, e.g.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_requires</span><span class="p">(</span><span class="s2">"sfml~foo"</span><span class="p">,</span> <span class="p">{</span><span class="n">configs</span> <span class="o">=</span> <span class="p">{</span><span class="n">graphics</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">window</span> <span class="o">=</span> <span class="kc">true</span><span class="p">}})</span>
<span class="n">add_requires</span><span class="p">(</span><span class="s2">"sfml~bar"</span><span class="p">,</span> <span class="p">{</span><span class="n">configs</span> <span class="o">=</span> <span class="p">{</span><span class="n">network</span> <span class="o">=</span> <span class="kc">true</span><span class="p">}})</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"sfml~foo"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"sfml~bar"</span><span class="p">)</span>
</code></pre>
</div>

<p>This is done by custom configuration of each package, but there are some problems with this approach.</p>

<ol>
  <li><code class="highlighter-rouge">sfml~foo</code> and <code class="highlighter-rouge">sfml~bar</code> will be installed repeatedly as two separate packages, taking up double the disk space</li>
  <li>some common code will be compiled repeatedly, which will affect the efficiency of the installation</li>
  <li>if a target depends on both <code class="highlighter-rouge">sfml~foo</code> and <code class="highlighter-rouge">sfml~bar</code>, there will be link conflicts</li>
</ol>

<p>The impact of double-compilation and disk usage can be very high for very large package integrations such as boost, and can even lead to more than N times the disk usage if there are a large number of sub-library combinations.</p>

<p>To solve this problem, Xmake has added a package component mode, which offers some of the following benefits.</p>

<ol>
  <li>fast integration of any number of components in just one compile, greatly improving installation efficiency and reducing disk footprint</li>
  <li>component abstraction, across compilers and platforms, so users don’t need to worry about configuring link order dependencies between each sub library</li>
  <li>easier to use</li>
</ol>

<p>For more background details see: <a href="https://github.com/xmake-io/xmake/issues/2636">#2636</a></p>

<h4 id="use-package-components">Use package components</h4>

<p>For the user, using package components is very convenient because the user is not required to maintain the package, as long as the package is used, it is configured with the relevant set of components and we can quickly integrate and use it, e.g.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_requires</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">,</span> <span class="p">{</span><span class="n">components</span> <span class="o">=</span> <span class="s2">"graphics"</span><span class="p">})</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">,</span> <span class="p">{</span><span class="n">components</span> <span class="o">=</span> <span class="s2">"network"</span><span class="p">})</span>
</code></pre>
</div>

<h4 id="view-package-components">View package components</h4>

<p>So how do we know what components are provided by a given package? We can check by executing the following command.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xrepo info sfml
The package info of project:
    require<span class="o">(</span>sfml<span class="o">)</span>:
      -&gt; description: Simple and Fast Multimedia Library
      -&gt; version: 2.5.1
      ...
      -&gt; components:
         -&gt; system:
         -&gt; graphics: system, window
         -&gt; window: system
         -&gt; audio: system
         -&gt; network: system
</code></pre>
</div>

<h4 id="package-component-configuration">Package component configuration</h4>

<p>If you are a package maintainer and want to add component support to a package, then you need to configure the package components via the following two interfaces.</p>

<ul>
  <li>add_components: adds a list of package components</li>
  <li>on_component: Configures each package component</li>
</ul>

<h5 id="link-configuration-for-package-components">Link configuration for package components</h5>

<p>In most cases, a package component only needs to be configured with some of its own sub-link information, e.g.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"audio"</span><span class="p">,</span> <span class="s2">"network"</span><span class="p">,</span> <span class="s2">"window"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"system"</span><span class="p">)</span>

    <span class="n">on_component</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">e</span> <span class="o">=</span> <span class="n">package</span><span class="p">:</span><span class="n">config</span><span class="p">(</span><span class="s2">"shared"</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">""</span> <span class="ow">or</span> <span class="s2">"-s"</span>
        <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"links"</span><span class="p">,</span> <span class="s2">"sfml-graphics"</span> <span class="o">...</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">package</span><span class="p">:</span><span class="n">is_plat</span><span class="p">(</span><span class="s2">"windows"</span><span class="p">,</span> <span class="s2">"mingw"</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">package</span><span class="p">:</span><span class="n">config</span><span class="p">(</span><span class="s2">"shared"</span><span class="p">)</span> <span class="k">then</span>
            <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"links"</span><span class="p">,</span> <span class="s2">"freetype"</span><span class="p">)</span>
            <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"syslinks"</span><span class="p">,</span> <span class="s2">"opengl32"</span><span class="p">,</span> <span class="s2">"gdi32"</span><span class="p">,</span> <span class="s2">"user32"</span><span class="p">,</span> <span class="s2">"advapi32"</span><span class="p">)</span>
        <span class="k">end</span>
    <span class="k">end</span><span class="p">)</span>

    <span class="n">on_component</span><span class="p">(</span><span class="s2">"window"</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">e</span> <span class="o">=</span> <span class="n">package</span><span class="p">:</span><span class="n">config</span><span class="p">(</span><span class="s2">"shared"</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">""</span> <span class="ow">or</span> <span class="s2">"-s"</span>
        <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"links"</span><span class="p">,</span> <span class="s2">"sfml-window"</span> <span class="o">...</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">package</span><span class="p">:</span><span class="n">is_plat</span><span class="p">(</span><span class="s2">"windows"</span><span class="p">,</span> <span class="s2">"mingw"</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">package</span><span class="p">:</span><span class="n">config</span><span class="p">(</span><span class="s2">"shared"</span><span class="p">)</span> <span class="k">then</span>
            <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"syslinks"</span><span class="p">,</span> <span class="s2">"opengl32"</span><span class="p">,</span> <span class="s2">"gdi32"</span><span class="p">,</span> <span class="s2">"user32"</span><span class="p">,</span> <span class="s2">"advapi32"</span><span class="p">)</span>
        <span class="k">end</span>
    <span class="k">end</span><span class="p">)</span>

    <span class="o">...</span>
</code></pre>
</div>

<p>The above is an incomplete package configuration, I have only extracted a part of the configuration related to the package components.</p>

<p>A full example of the configuration and use of package components can be found at: <a href="https://github.com/xmake-io/xmake/blob/master/tests/projects/package/components/xmake.lua">components example</a></p>

<h5 id="configure-compilation-information-for-components">Configure compilation information for components</h5>

<p>We can configure not only the linking information for each component, but also the compilation information for includedirs, defines etc. We can also configure each component individually.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">)</span>
    <span class="n">on_component</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
        <span class="n">package</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"defines"</span><span class="p">,</span> <span class="s2">"TEST"</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h5 id="configure-component-dependencies">Configure component dependencies</h5>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"audio"</span><span class="p">,</span> <span class="s2">"network"</span><span class="p">,</span> <span class="s2">"window"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"system"</span><span class="p">)</span>

    <span class="n">on_component</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
          <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"deps"</span><span class="p">,</span> <span class="s2">"window"</span><span class="p">,</span> <span class="s2">"system"</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>The above configuration tells the package that our graphics component will have additional dependencies on the <code class="highlighter-rouge">window</code> and <code class="highlighter-rouge">system</code> components.</p>

<p>So, on the user side, our use of the graphics component can be done from the</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_packages</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">,</span> <span class="p">{</span><span class="n">components</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"graphics"</span><span class="p">,</span> <span class="s2">"window"</span><span class="p">,</span> <span class="s2">"system"</span><span class="p">})</span>
</code></pre>
</div>

<p>Simplified to.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_packages</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">,</span> <span class="p">{</span><span class="n">components</span> <span class="o">=</span> <span class="s2">"graphics"</span><span class="p">)</span>
</code></pre>
</div>

<p>Because, as soon as we turn on the graphics component, it will also automatically enable the dependent window and system components and automatically ensure that the links are in the right order.</p>

<p>Alternatively, we can configure component dependencies with <code class="highlighter-rouge">add_components("graphics", {deps = {"window", "system"}})</code>.</p>

<h5 id="find-components-from-the-system-library">Find components from the system library</h5>

<p>We know that configuring <code class="highlighter-rouge">add_extsources</code> in the package configuration can improve package discovery on the system, for example by finding libraries from system package managers such as apt/pacman.</p>

<p>Of course, we can also make it possible for each component to prioritise finding them from the system repositories via the <code class="highlighter-rouge">extsources</code> configuration as well.</p>

<p>For example, the sfml package, which is actually also componentized in homebrew, can be made to find each component from the system repository without having to install them in source each time.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ls -l /usr/local/opt/sfml/lib/pkgconfig
-r--r--r-- 1 ruki admin 317 10 19 17:52 sfml-all.pc
-r--r--r-- 1 ruki admin 534 10 19 17:52 sfml-audio.pc
-r--r--r-- 1 ruki admin 609 10 19 17:52 sfml-graphics.pc
-r--r--r-- 1 ruki admin 327 10 19 17:52 sfml-network.pc
-r--r--r-- 1 ruki admin 302 10 19 17:52 sfml-system.pc
-r--r--r-- 1 ruki admin 562 10 19 17:52 sfml-window.pc
</code></pre>
</div>

<p>We just need, for each component, to configure its extsources: the</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="n">is_plat</span><span class="p">(</span><span class="s2">"macosx"</span><span class="p">)</span> <span class="k">then</span>
    <span class="n">add_extsources</span><span class="p">(</span><span class="s2">"brew::sfml/sfml-all"</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">on_component</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
    <span class="c1">-- ...</span>
    <span class="n">component</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"extsources"</span><span class="p">,</span> <span class="s2">"brew::sfml/sfml-graphics"</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h5 id="default-global-component-configuration">Default Global Component Configuration</h5>

<p>In addition to configuring specific components by specifying component names, if we do not specify a component name, the default is to globally configure all components.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">)</span>
    <span class="n">on_component</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
        <span class="c1">-- configure all components</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>Of course, we could also specify the configuration of the graphics component and the rest of the components would be configured via the default global configuration interface in the following way.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"sfml"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"audio"</span><span class="p">,</span> <span class="s2">"network"</span><span class="p">,</span> <span class="s2">"window"</span><span class="p">)</span>
    <span class="n">add_components</span><span class="p">(</span><span class="s2">"system"</span><span class="p">)</span>

    <span class="n">on_component</span><span class="p">(</span><span class="s2">"graphics"</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
        <span class="c1">-- configure graphics</span>
    <span class="k">end</span><span class="p">)</span>

    <span class="n">on_component</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>
        <span class="c1">-- component audio, network, window, system</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="c-module-build-improvements">C++ module build improvements</h3>

<h4 id="incremental-build-support">Incremental build support</h4>

<p>I thought that Xmake already had good support for C++ modules, but then I realised that its incremental builds don’t work properly yet.</p>

<p>So this version of Xmake also does a good job of supporting incremental builds of C++ modules, although the support process still took a lot of effort.</p>

<p>My analysis shows that the format of the include dependency information (<code class="highlighter-rouge">*.d</code>) generated with modules varies considerably between the compilers.</p>

<p>The gcc format is the most complex, but I got it to support it anyway.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nl">build/.objs/dependence/linux/x86_64/release/src/foo.mpp.o</span><span class="o">:</span> <span class="nf">src/foo.mpp</span>\
<span class="nf">build/.objs/dependence/linux/x86_64/release/src/foo.mpp.o gcm.cache/foo.gcm: bar.c++m cat.c++m</span>\
<span class="nf">foo.c++m: gcm.cache/foo.gcm</span>\
<span class="nf">.PHONY: foo.c++m</span>\
<span class="nf">gcm.cache/foo.gcm:| build/.objs/dependence/linux/x86_64/release/src/foo.mpp.o</span>\
<span class="nf">CXX_IMPORTS += bar.c++m cat.c++m</span>\
</code></pre>
</div>

<p>clang has the best format compatibility and supports it without any special changes.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>build//hello.pcm: /usr/lib/llvm-15/lib/clang/15.0.2/include/module.modulemap src/hello.mpp\
</code></pre>
</div>

<p>The msvc format is more extensible and easier to parse and support: the</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"Source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c:\users\ruki\desktop\user_headerunit\src\main.cpp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ProvidedModule"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nt">"Includes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nt">"ImportedModules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"BMI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c:\users\ruki\desktop\user_headerunit\src\hello.ifc"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"ImportedHeaderUnits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"Header"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c:\users\ruki\desktop\user_headerunit\src\header.hpp"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"BMI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c:\users\ruki\desktop\user_headerunit\src\header.hpp.ifc"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="circular-dependency-detection-support">Circular Dependency Detection Support</h4>

<p>As there are dependencies between modules, it is not possible to compile if there are circular dependencies between several modules.</p>

<p>However, in previous versions Xmake was unable to detect this, and when a circular dependency was encountered, the compilation would get stuck without any message, which was very unfriendly to the user.</p>

<p>In this new version, we have improved this situation by adding the detection of cyclic dependencies for modules, and the following error message will appear when compiling to make it easier for the user to locate the problem.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake
<span class="o">[</span> 0%]: generating.cxx.module.deps Foo.mpp
<span class="o">[</span> 0%]: generating.cxx.module.deps Foo2.mpp
<span class="o">[</span> 0%]: generating.cxx.module.deps Foo3.mpp
<span class="o">[</span> 0%]: generating.cxx.module.deps main.cpp
error: circular modules dependency<span class="o">(</span>Foo2, Foo, Foo3, Foo2<span class="o">)</span> detected!
  -&gt; module<span class="o">(</span>Foo2<span class="o">)</span> <span class="k">in </span>Foo2.mpp
  -&gt; module<span class="o">(</span>Foo<span class="o">)</span> <span class="k">in </span>Foo.mpp
  -&gt; module<span class="o">(</span>Foo3<span class="o">)</span> <span class="k">in </span>Foo3.mpp
  -&gt; module<span class="o">(</span>Foo2<span class="o">)</span> <span class="k">in </span>Foo2.mpp
</code></pre>
</div>

<h3 id="a-more-lsp-friendly-syntax-format">A more LSP friendly syntax format</h3>

<p>Our default convention of domain configuration syntax, although very clean, is not very friendly to auto-formatted indentation and IDEs, and if you format your configuration, the indentation is completely misplaced.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
</code></pre>
</div>

<p>Also, if some global configuration is configured between two targets, it does not automatically end the current target scope and the user needs to explicitly call ``target_end()`.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
<span class="n">target_end</span><span class="p">()</span>

<span class="n">add_defines</span><span class="p">(</span><span class="s2">"ROOT"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
</code></pre>
</div>

<p>Although, as we mentioned above, you can use the <code class="highlighter-rouge">do end</code> mode to solve the auto-indentation problem, the problem of needing <code class="highlighter-rouge">target_end()</code> still exists.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">target_end</span><span class="p">()</span>

<span class="n">add_defines</span><span class="p">(</span><span class="s2">"ROOT"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Therefore, in this new version, we provide a better optional domain configuration syntax to solve the auto-indentation, target domain isolation problem, e.g.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>

<span class="n">add_defines</span><span class="p">(</span><span class="s2">"ROOT"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>The foo and bar fields are completely isolated, so we can configure other settings between them without affecting them, plus it’s very LSP friendly and won’t cause indentation confusion, even with one-click formatting.</p>

<p>Note: This is only an optional extension syntax, the existing configuration syntax is still fully supported and the user can choose the right one according to their needs preferences.</p>

<h3 id="add-flags-to-specific-compilers">Add flags to specific compilers</h3>

<p>Values configured using interfaces such as <code class="highlighter-rouge">add_cflags</code>, <code class="highlighter-rouge">add_cxxflags</code>, etc. are usually compiler specific, although Xmake does provide automatic detection and mapping mechanisms.
Even if a flags is set that is not supported by the current compiler, Xmake can automatically ignore it, but there will still be a warning.</p>

<p>In this new version, we have improved the interface for adding all flags to avoid additional warnings by specifying flags only for specific compilers, e.g.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_cxxflags</span><span class="p">(</span><span class="s2">"clang::-stdlib=libc++"</span><span class="p">)</span>
<span class="n">add_cxxflags</span><span class="p">(</span><span class="s2">"gcc::-stdlib=libc++"</span><span class="p">)</span>
</code></pre>
</div>

<p>Or</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_cxxflags</span><span class="p">(</span><span class="s2">"-stdlib=libc++"</span><span class="p">,</span> <span class="p">{</span><span class="n">tools</span> <span class="o">=</span> <span class="s2">"clang"</span><span class="p">})</span>
<span class="n">add_cxxflags</span><span class="p">(</span><span class="s2">"-stdlib=libc++"</span><span class="p">,</span> <span class="p">{</span><span class="n">tools</span> <span class="o">=</span> <span class="s2">"gcc"</span><span class="p">})</span>
</code></pre>
</div>

<p>Note: Not just compile flags, but also for link flags such as add_ldflags, which also work.</p>

<h3 id="renderdoc-debugger-support">renderdoc debugger support</h3>

<p>Thanks to <a href="https://github.com/SirLynix">@SirLynix</a> for contributing this great feature which allows Xmake to load renderdoc directly to debug some graphics renderers.</p>

<p>It’s very simple to use, we first make sure renderdoc is installed, then configure the debugger to renderdoc and load the debug run as follows</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake f --debugger<span class="o">=</span>renderdoc
<span class="gp">$ </span>xmake run -d
</code></pre>
</div>

<p>The concrete usage effect is as follows.</p>

<p><img src="/static/img/xmake/renderdoc.gif" width="650px" /></p>

<h3 id="new-c-exception-interface-configuration">New C++ exception interface configuration</h3>

<p>Xmake has added a new <code class="highlighter-rouge">set_exceptions</code> abstraction configuration interface, which allows us to configure C++/Objc exceptions to be enabled and disabled.</p>

<p>Normally, if we configure them via the add_cxxflags interface, it would be cumbersome for the compiler to handle them separately, depending on the platform.</p>

<p>For example</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">target</span><span class="p">:</span><span class="n">has_tool</span><span class="p">(</span><span class="s2">"cxx"</span><span class="p">,</span> <span class="s2">"cl"</span><span class="p">))</span> <span class="k">then</span>
        <span class="n">target</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"cxflags"</span><span class="p">,</span> <span class="s2">"/EHsc"</span><span class="p">,</span> <span class="p">{</span><span class="n">force</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
        <span class="n">target</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"defines"</span><span class="p">,</span> <span class="s2">"_HAS_EXCEPTIONS=1"</span><span class="p">,</span> <span class="p">{</span><span class="n">force</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="k">elseif</span><span class="p">(</span><span class="n">target</span><span class="p">:</span><span class="n">has_tool</span><span class="p">(</span><span class="s2">"cxx"</span><span class="p">,</span> <span class="s2">"clang"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">target</span><span class="p">:</span><span class="n">has_tool</span><span class="p">(</span><span class="s2">"cxx"</span><span class="p">,</span> <span class="s2">"clang-cl"</span><span class="p">))</span> <span class="k">then</span>
        <span class="n">target</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"cxflags"</span><span class="p">,</span> <span class="s2">"-fexceptions"</span><span class="p">,</span> <span class="p">{</span><span class="n">force</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
        <span class="n">target</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"cxflags"</span><span class="p">,</span> <span class="s2">"-fcxx-exceptions"</span><span class="p">,</span> <span class="p">{</span><span class="n">force</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>And with this interface, we can abstract to configure them in a compiler-independent way.</p>

<p>Enabling C++ exceptions:</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">set_exceptions</span><span class="p">(</span><span class="s2">"cxx"</span><span class="p">)</span>
</code></pre>
</div>

<p>Disable C++ exceptions:</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">set_exceptions</span><span class="p">(</span><span class="s2">"no-cxx"</span><span class="p">)</span>
</code></pre>
</div>

<p>We can also configure to turn on objc exceptions at the same time.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">set_exceptions</span><span class="p">(</span><span class="s2">"cxx"</span><span class="p">,</span> <span class="s2">"objc"</span><span class="p">)</span>
</code></pre>
</div>

<p>or disable them.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">set_exceptions</span><span class="p">(</span><span class="s2">"no-cxx"</span><span class="p">,</span> <span class="s2">"no-objc"</span><span class="p">)</span>
</code></pre>
</div>

<p>Xmake automatically adapts the flags internally to the different compilers.</p>

<h3 id="support-for-ispc-compilation-rules">Support for ispc compilation rules</h3>

<p>Xmake has added support for built-in rules for the ipsc compiler, thanks to <a href="https://github.com/star-hengxing">@star-hengxing</a>, which is used in the following way.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">target</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"utils.ispc"</span><span class="p">,</span> <span class="p">{</span><span class="n">header_extension</span> <span class="o">=</span> <span class="s2">"_ispc.h"</span><span class="p">})</span>
    <span class="n">set_values</span><span class="p">(</span><span class="s2">"ispc.flags"</span><span class="p">,</span> <span class="s2">"--target=host"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.ispc"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="support-for-msvcs-armasm-compiler">Support for msvc’s armasm compiler</h3>

<p>Previous versions of Xmake added initial support for Windows ARM, but did not yet have good support for asm compilation, so in this version we have continued to improve Windows ARM support.</p>

<p>Support for msvc’s <code class="highlighter-rouge">armasm.exe</code> and <code class="highlighter-rouge">armasm64.exe</code> is now available.</p>

<p>In addition, we have also improved package cross-compilation support for the Windows ARM platform.</p>

<h3 id="new-gnu-rm-build-rules">New gnu-rm build rules</h3>

<p>Xmake has also added a new rule and example project for building embedded projects using the gnu-rm toolchain, thanks to <a href="https://github.com/JacobPeng">@JacobPeng</a> for this.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_rules</span><span class="p">(</span><span class="s2">"mode.debug"</span><span class="p">,</span> <span class="s2">"mode.release"</span><span class="p">)</span>

<span class="n">add_requires</span><span class="p">(</span><span class="s2">"gnu-rm"</span><span class="p">)</span>
<span class="n">set_toolchains</span><span class="p">(</span><span class="s2">"@gnu-rm"</span><span class="p">)</span>
<span class="n">set_plat</span><span class="p">(</span><span class="s2">"cross"</span><span class="p">)</span>
<span class="n">set_arch</span><span class="p">(</span><span class="s2">"armv7"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"gnu-rm.static"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/foo/*.c"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"gnu-rm.binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.c"</span><span class="p">,</span> <span class="s2">"src/*.S"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.ld"</span><span class="p">)</span>
    <span class="n">add_includedirs</span><span class="p">(</span><span class="s2">"src/lib/cmsis"</span><span class="p">)</span>
</code></pre>
</div>

<p>For the full project see: <a href="https://github.com/xmake-io/xmake/blob/master/tests/projects/embed/gnu-rm/hello/xmake.lua">Embed GNU-RM Example</a></p>

<h3 id="add-openbsd-system-support">Add OpenBSD system support</h3>

<p>In previous versions, Xmake only supported FreeBSD, and OpenBSD had a number of differences that prevented Xmake from compiling and installing on it.</p>

<p>The new version now fully supports running Xmake on OpenBSD.</p>

<h2 id="changelog">Changelog</h2>

<h3 id="new-features">New features</h3>

<ul>
  <li>A new optional configuration syntax. It is LSP friendly, automatically calls target_end() to achieve scope isolation.</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2944">#2944</a>: Add <code class="highlighter-rouge">gnu-rm.binary</code> and <code class="highlighter-rouge">gnu-rm.static</code> rules and tests for embed project</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2636">#2636</a>: Support package components</li>
  <li>Support armasm/armasm64 for msvc</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/3023">#3023</a>: Add support for debugging with renderdoc</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/3022">#3022</a>: Add flags for specific compilers and linkers</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/3025">#3025</a>: C++ exception enabled/disabled switch method</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/3017">#3017</a>: Support ispc compiler</li>
</ul>

<h3 id="changes">Changes</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/2925">#2925</a>: Improve doxygen plugin</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2948">#2948</a>: Support OpenBSD</li>
  <li>Add <code class="highlighter-rouge">xmake g --insecure-ssl=y</code> option to disable ssl certificate when downloading packages</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2971">#2971</a>: Stabilize vs and vsxmake project generation</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/3000">#3000</a>: Incremental compilation support for modules</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/3016">#3016</a>: Improve clang/msvc to better support std modules</li>
</ul>

<h3 id="bugs-fixed">Bugs fixed</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/2949">#2949</a>: Fix vs group</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2952">#2952</a>: Fix armlink for long args</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2954">#2954</a>: Fix c++ module partitions path issue</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/3033">#3033</a>: Detect circular modules dependency</li>
</ul>

        </article>
        <hr>

        <!-- baidu ads -->
        

        
        
            
        
            
            
                
                    
                    <h2 id="chinese">中文</h2>
                    <ul>
                    
                    <li class="relatedPost">
                        <a href="/cn/2022/11/08/xmake-update-v2.7.3/">Xmake v2.7.3 发布，包组件和 C++ 模块增量构建支持
                        
                        </a>
                    </li>
                    
                    
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
        
            </ul>
        

        
        
            
        
            
            
            
                
                    
                        
                        <h2 id="similar_posts">Similar Posts</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="/2022/10/09/xmake-update-v2.7.2/">Xmake v2.7.2 released, build third-party libraries more intelligently
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2022/08/25/xmake-update-v2.7.1/">Xmake v2.7.1 Released, Better C++ Modules Support
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2022/05/24/xmake-update-v2.6.6/">Xmake v2.6.6 Released, Support Distributed Compilation and Build Cache
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2022/04/24/xmake-update-v2.6.5/">Xmake v2.6.5 released, Support remote compilation
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">

        

        

        
        
        

        

        

        
        
        <p><strong>Prev Post</strong> <a href="/2022/10/09/xmake-update-v2.7.2/">Xmake v2.7.2 released, build third-party libraries more intelligently</a></p>
        
    </div>

    <div class="nex">

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        

        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        









    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">


            <!-- codefund ads -->
            

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#chinese">中文</a></li>
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>

            <!-- baidu ads -->
            

            <br>
            <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul class="content-ul">
                  <li><a href="http://github.com/waruqi/tbox">tbox</a></li>
                  <li><a href="http://www.xmake.io">xmake</a></li>
                  <li><a href="https://github.com/waruqi">github</a></li>
                </ul>
            </div> 

            <!-- google ads -->
            

            <!-- baidu ads -->
            

            <!-- chitika ads -->
            
        </div>
    </div>

    <!-- baidu ads -->
    
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>



    <footer class="site-footer">
    <div class="wrapper">
        <p class="description">
             Copyright (c) 2016-latest tboox.org 
        </p>
        <p class="contact">
            
            <a href="https://github.com/waruqi" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a> 
             
            
            <a href="mailto:waruqi@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a> 
            
            
            <a href="https://twitter.com/waruqi" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a> 
            
            <a href="/feed.xml" title="feed"><i class="fa fa-feed" aria-hidden="true"></i></a> 
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/Gaohaoyang">HyG</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
        </p>
    </div>
</footer>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
