<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Xmake v2.7.2 released, build third-party libraries more intelligently</title>
    <meta name="description" content="Xmake is a lightweight cross-platform build utility based on Lua.It is very lightweight and has no dependencies because it has a built-in Lua runtime.It uses...">

    
    <meta name="keywords" content="xmake,lua,C/C++,trybuild,rule,cmake,autoconf,tboox" /> 

    <!-- qq oauth -->
    <meta property="qc:admins" content="5211601217706727767255" />

    <!--icon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" sizes="192x192" href="/static/img/nice-highres.png" />
	<link rel="apple-touch-icon-precomposed" href="/static/img/apple-touch-icon-57x57-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/img/apple-touch-icon-72x72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/img/apple-touch-icon-114x114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/img/apple-touch-icon-144x144-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="/static/img/retinahd_icon.png" />
	<meta name="msapplication-TileImage" content="/static/img/retinahd_icon.png" />
	
    <link rel="stylesheet" href=" /css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="https://tboox.org/2022/10/09/xmake-update-v2.7.2/">
    <link rel="alternate" type="application/rss+xml" title="TBOOX Open Source Project" href="https://tboox.org/feed.xml ">
    <link rel="alternate" hreflang="en" href="https://tboox.org/" />
    <link rel="alternate" hreflang="zh-Hans" href="https://tboox.org/cn/" />




    <script type="text/javascript">
    function isPC(){    
        var userAgentInfo = navigator.userAgent;  
        var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");    
        var flag = true;    
        for (var v = 0; v < Agents.length; v++) {    
            if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }    
        }    
        return flag;    
    }
    </script>

<!-- baidu ads -->



    <!-- baidu ads -->

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">TBOOX</a>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/cn?lang=0">
                    
                        <i class="fa fa-home"></i>中文
                    </a>
                </li>

                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/project/">
                            
                        
                            <i class="fa fa-bookmark"></i>Projects
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/archive/">
                            
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/category/">
                            
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/tag/">
                            
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                    
                    
                
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/docs/">
                            
                        
                            <i class="fa fa-book"></i>Documents
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="https://xmake.io/#/about/contact" target="_blank" >
                            
                        
                            <i class="fa fa-forumbee"></i>Community
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/donation/">
                            
                        
                            <i class="fa fa-heart"></i>Donate
                        </a>
                    </li>
                    
                    
                    
                
                    
                     
                    
                
                    
                     
                     
                    <li>

                        
                            
                            <a href="/about/">
                            
                        
                            <i class="fa fa-user"></i>About
                        </a>
                    </li>
                    
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                     
                     
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>



        <div class="page clearfix" post>
    <div class="left">
        <h1>Xmake v2.7.2 released, build third-party libraries more intelligently</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2022-10-09
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#xmake" title="Category: xmake" rel="category">xmake</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a-->
        <a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a>&nbsp;
    
        <!--a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a-->
        <a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a>&nbsp;
    
        <!--a href="/tag/#C%2FC%2B%2B" title="Tag: C/C++" rel="tag">C/C++</a-->
        <a href="/tag/#C/C++" title="Tag: C/C++" rel="tag">C/C++</a>&nbsp;
    
        <!--a href="/tag/#trybuild" title="Tag: trybuild" rel="tag">trybuild</a-->
        <a href="/tag/#trybuild" title="Tag: trybuild" rel="tag">trybuild</a>&nbsp;
    
        <!--a href="/tag/#rule" title="Tag: rule" rel="tag">rule</a-->
        <a href="/tag/#rule" title="Tag: rule" rel="tag">rule</a>&nbsp;
    
        <!--a href="/tag/#cmake" title="Tag: cmake" rel="tag">cmake</a-->
        <a href="/tag/#cmake" title="Tag: cmake" rel="tag">cmake</a>&nbsp;
    
        <!--a href="/tag/#autoconf" title="Tag: autoconf" rel="tag">autoconf</a-->
        <a href="/tag/#autoconf" title="Tag: autoconf" rel="tag">autoconf</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <p><a href="https://github.com/xmake-io/xmake">Xmake</a> is a lightweight cross-platform build utility based on Lua.</p>

<p>It is very lightweight and has no dependencies because it has a built-in Lua runtime.</p>

<p>It uses xmake.lua to maintain project builds and its configuration syntax is very simple and readable.</p>

<p>We can use it to build project directly like Make/Ninja, or generate project files like CMake/Meson, and it also has a built-in package management system to help users solve the integrated use of C/C++ dependent libraries.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake = Build backend + Project Generator + Package Manager + [Remote|Distributed] Build + Cache
</code></pre>
</div>

<p>Although not very precise, we can still understand Xmake in the following way:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake ~= Make/Ninja + CMake/Meson + Vcpkg/Conan + distcc + ccache/sccache
</code></pre>
</div>

<ul>
  <li><a href="https://github.com/xmake-io/xmake">Github</a></li>
  <li><a href="https://xmake.io/">Document</a></li>
</ul>

<h2 id="introduction-of-new-features">Introduction of new features</h2>

<h3 id="building-third-party-libraries-more-intelligently">Building third party libraries more intelligently</h3>

<p>In previous versions, Xmake provided a TryBuild mode that allowed you to use Xmake to try to build third-party projects maintained by autoconf/cmake/meson etc. directly without xmake.lua.</p>

<p>In effect, this means that Xmake detects the corresponding build system and invokes commands such as cmake to do so, but it will help the user to simplify the configuration operation, plus it will interface with xmake’s cross-compilation toolchain configuration.</p>

<p>However, this mode has a certain failure rate, which can lead to build failure if, for example</p>

<ol>
  <li>the project code itself is flawed, resulting in a compilation error</li>
  <li>the project code does not support the current platform</li>
  <li>the build script is flawed</li>
  <li>specific configuration parameters are missing</li>
  <li>a missing dependency library that needs to be installed by the user</li>
  <li>the compiler version is too low and does not support some of the code</li>
</ol>

<p>The TryBuild mode usually handles these cases, but in this new version we have introduced a new mechanism to the TryBuild mode to improve the build logic by reusing build scripts from the <a href="https://github.com/xmake-io/xmake-repo">xmake-repo</a> repository.</p>

<p>It roughly handles the process in the following way.</p>

<ol>
  <li>execute the xmake command in the third-party source repository directory</li>
  <li>xmake gets the directory name and tries to resolve the project name and version</li>
  <li>try to match an existing package from the xmake-repo repository</li>
  <li>If the match is successful, build directly using the build logic in the package</li>
  <li>if no match is made, fall back to the original TryBuild logic</li>
</ol>

<p>What is the benefit of this, if the match is successful, we can solve all the problems mentioned above.</p>

<p>Even if the current project source code does not support a given platform, or if the source code and build script are flawed in some way, Xmake will automatically patch in a specific patch to fix it and bring in the required dependencies to ensure that it will definitely compile in one click.</p>

<p>Let’s take a look at the libjpeg library as an example.</p>

<h4 id="the-first-step-is-to-download-the-corresponding-source-code-package">The first step is to download the corresponding source code package</h4>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>wget https://jaist.dl.sourceforge.net/project/libjpeg-turbo/2.1.4/libjpeg-turbo-2.1.4.tar.gz
<span class="gp">$ </span>tar -xvf libjpeg-turbo-2.1.4.tar.gz
<span class="gp">$ </span><span class="nb">cd </span>libjpeg-turbo-2.1.4
</code></pre>
</div>

<h4 id="enter-the-directory-and-execute-the-xmake-command">Enter the directory and execute the Xmake command</h4>

<p>Xmake will prompt the user if it detects that it is the libjpeg library, and whether to build it as libjpeg 2.1.4.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>ruki-2:libjpeg-turbo-2.1.4 ruki<span class="nv">$ </span>xmake
note: libjpeg-turbo 2.1.4 <span class="k">in </span>xmake-repo found, try building it or you can run <span class="sb">``</span>xmake f --trybuild<span class="o">=</span><span class="sb">`</span> to <span class="nb">set </span>buildsystem <span class="o">(</span>pass -y or --confirm<span class="o">=</span>y/n/d to skip confirm<span class="o">)</span>?
please input: y <span class="o">(</span>y/n<span class="o">)</span>
</code></pre>
</div>

<p>We hit enter to confirm to continue the build.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>checking <span class="k">for </span>cmake ... /usr/local/bin/cmake
/usr/local/bin/cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DENABLE_SHARED<span class="o">=</span>OFF -DENABLE_STATIC<span class="o">=</span>ON -DCMAKE_POSITION_INDEPENDENT_CODE<span class="o">=</span>ON -DCMAKE_ INSTALL_LIBDIR:PATH<span class="o">=</span>lib -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2 -G <span class="s2">"Unix Makefiles"</span> -DCMAKE_POSITION_INDEPENDENT_CODE<span class="o">=</span>ON /Users/ruki/Downloads/libjpeg-turbo-2.1.4
-- CMAKE_BUILD_TYPE <span class="o">=</span> Release
-- VERSION <span class="o">=</span> 2.1.4, BUILD <span class="o">=</span> 20220923
-- 64-bit build <span class="o">(</span>x86_64<span class="o">)</span>
-- CMAKE_INSTALL_PREFIX <span class="o">=</span> /Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2
-- CMAKE_INSTALL_BINDIR <span class="o">=</span> bin <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/bin<span class="o">)</span>
-- CMAKE_INSTALL_DATAROOTDIR <span class="o">=</span> share <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/share<span class="o">)</span>
-- CMAKE_INSTALL_DOCDIR <span class="o">=</span> share/doc/libjpeg-turbo <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/ share/doc/libjpeg-turbo<span class="o">)</span>
-- CMAKE_INSTALL_INCLUDEDIR <span class="o">=</span> include <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/include<span class="o">)</span>
-- CMAKE_INSTALL_LIBDIR <span class="o">=</span> lib <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/lib<span class="o">)</span>
-- CMAKE_INSTALL_MANDIR <span class="o">=</span> share/man <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/share/man<span class="o">)</span>
-- Shared libraries disabled <span class="o">(</span>ENABLE_SHARED <span class="o">=</span> 0<span class="o">)</span>
-- Static libraries enabled <span class="o">(</span>ENABLE_STATIC <span class="o">=</span> 1<span class="o">)</span>
-- 12-bit JPEG support disabled <span class="o">(</span>WITH_12BIT <span class="o">=</span> 0<span class="o">)</span>
-- Arithmetic decoding support enabled <span class="o">(</span>WITH_ARITH_DEC <span class="o">=</span> 1<span class="o">)</span>
-- Arithmetic encoding support enabled <span class="o">(</span>WITH_ARITH_ENC <span class="o">=</span> 1<span class="o">)</span>
-- TurboJPEG API library enabled <span class="o">(</span>WITH_TURBOJPEG <span class="o">=</span> 1<span class="o">)</span>
-- TurboJPEG Java wrapper disabled <span class="o">(</span>WITH_JAVA <span class="o">=</span> 0<span class="o">)</span>
-- In-memory <span class="nb">source</span>/destination managers enabled <span class="o">(</span>WITH_MEM_SRCDST <span class="o">=</span> 1<span class="o">)</span>
-- Emulating libjpeg API/ABI v6.2 <span class="o">(</span>WITH_JPEG7 <span class="o">=</span> 0, WITH_JPEG8 <span class="o">=</span> 0<span class="o">)</span>
-- libjpeg API shared library version <span class="o">=</span> 62.3.0
-- Compiler flags <span class="o">=</span> -O3 -DNDEBUG
-- Linker flags <span class="o">=</span>
-- INLINE <span class="o">=</span> __inline__ __attribute__<span class="o">((</span>always_inline<span class="o">))</span> <span class="o">(</span>FORCE_INLINE <span class="o">=</span> 1<span class="o">)</span>
-- THREAD_LOCAL <span class="o">=</span> __thread
-- CMAKE_EXECUTABLE_SUFFIX <span class="o">=</span>
-- CMAKE_ASM_NASM_COMPILER <span class="o">=</span> /usr/local/bin/nasm
-- CMAKE_ASM_NASM_OBJECT_FORMAT <span class="o">=</span> macho64
-- CMAKE_ASM_NASM_FLAGS <span class="o">=</span> -DMACHO -D__x86_64__ -DPIC
-- SIMD extensions: x86_64 <span class="o">(</span>WITH_SIMD <span class="o">=</span> 1<span class="o">)</span>
-- FLOATTEST <span class="o">=</span> sse
-- Configuring <span class="k">done</span>
-- Generating <span class="k">done</span>
-- Build files have been written to: /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build_646b7957
make -j10
<span class="o">[</span> 2%] Built target md5cmp
<span class="o">[</span> 19%] Built target wrjpgcom
<span class="o">[</span> 20%] Built target simd
<span class="o">[</span> 21%] Built target strtest
<span class="o">[</span> 22%] Built target rdjpgcom
<span class="o">[</span> 80%] Built target jpeg-static
<span class="o">[</span> 84%] Built target turbojpeg-static
<span class="o">[</span> 90%] Built target tjbench-static
<span class="o">[</span> 90%] Built target tjunittest-static
<span class="o">[</span> 91%] Built target jpegtran-static
<span class="o">[</span> 98%] Built target djpeg-static
<span class="o">[</span> 100%] Built target cjpeg-static
make install
<span class="o">[</span> 1%] Built target strtest
<span class="o">[</span> 3%] Built target wrjpgcom
<span class="o">[</span> 19%] Built target simd
<span class="o">[</span> 52%] Built target turbojpeg-static
<span class="o">[</span> 53%] Built target rdjpgcom
<span class="o">[</span> 82%] Built target jpeg-static
<span class="o">[</span> 85%] Built target jpegtran-static
<span class="o">[</span> 90%] Built target djpeg-static
<span class="o">[</span> 93%] Built target tjunittest-static
<span class="o">[</span> 97%] Built target cjpeg-static
<span class="o">[</span> 98%] Built target tjbench-static
<span class="o">[</span>100%] Built target md5cmp
Install the project...
exporting libjpeg-turbo-2.1.4
  -&gt; /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2
output to /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts
build ok!
</code></pre>
</div>

<p>As long as the match is detected, the build will usually complete with a near 100% success rate, and Xmake will output the build product to the current directory under <code class="highlighter-rouge">build/artifacts</code>.</p>

<h4 id="interfacing-with-cross-compilation-toolchains">Interfacing with cross-compilation toolchains</h4>

<p>This smart build mode allows us to not only build native applications, but also to interface with the cross-compilation toolchain to support ios/android and any cross-compilation platform.</p>

<p>For example, to build on Android, we simply pass the <code class="highlighter-rouge">--trybuild=xrepo</code> argument and switch to Android, and Xmake will pass all the ndk toolchain information.</p>

<p>``bash
$ xmake f -p android –trybuild=xrepo –ndk=~/files/android-ndk-r20b -c
$ xmake
xmake f -c –require=n -v -p android -a armeabi-v7a -m release -k static –ndk=/Users/ruki/files/android-ndk-r20b
checking for Android SDK directory … ~/Library/Android/sdk
checking for Build Tools Version of Android SDK … 33.0.0
checking for NDK directory … /Users/ruki/files/android-ndk-r20b
checking for SDK version of NDK … … 21
checking for clang++ … /Users/ruki/files/android-ndk-r20b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++
checking for the shared library linker (sh) … clang++
checking for clang++ … /Users/ruki/files/android-ndk-r20b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++
checking for the linker (ld) … clang++
…
exporting libjpeg-turbo-2.1.4
  -&gt; /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts/l/libjpeg-turbo/2.1.4/79c2e21f436b4ab08a3c23a6cbae8c0e
output to /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts
build ok!</p>
<div class="highlighter-rouge"><pre class="highlight"><code>
#### fallback to direct compilation

If we don't want to use the xmake-repo build scripts, we can fall back to cmake/autoconf and try to build them directly.

However, this may have a certain failure rate and may compile additional binary targets that are not needed. The build script in xmake-repo is optimised to streamline a lot of unnecessary build parameters, such as disabling the tests/examples build.

We just need to hit n to cancel the smart build mode based on package scripts, and Xmake will give a new prompt to let the user choose whether to continue with the cmake/autoconf build attempt.

```bash
$ xmake
note: libjpeg-turbo 2.1.4 in xmake-repo found, try building it or you can run ``xmake f --trybuild=` to set buildsystem (pass -y or --confirm=y/n/d to skip confirm)?
please input: y (y/n)
n
note: CMakeLists.txt found, try building it or you can run `xmake f --trybuild=` to set buildsystem (pass -y or --confirm=y/n/d to skip confirm)?
please input: y (y/n)
</code></pre>
</div>

<h3 id="support-for-windows-arm64">Support for Windows Arm64</h3>

<p>We have also improved our Windows build support with the addition of Windows Arm64 platform support, simply by switching to the arm64 architecture.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake f -a arm64
<span class="gp">$ </span>xmake
</code></pre>
</div>

<h3 id="improved-rule-support-for-sequential-execution-of-dependencies">Improved rule support for sequential execution of dependencies</h3>

<p>Associated dependencies can be bound to a batch of rules, i.e. instead of having to add rules to target one by one using <code class="highlighter-rouge">add_rules()</code>, just apply a rule that will take effect for it and all its dependencies.</p>

<p>For example</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>

<span class="n">rule</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
   <span class="o">...</span>
</code></pre>
</div>

<p>We only need <code class="highlighter-rouge">add_rules("foo")</code> to apply both foo and bar rules.</p>

<p>However, by default there is no order of execution between dependencies, and scripts such as <code class="highlighter-rouge">on_build_file</code> for foo and bar are executed in parallel, in an undefined order.</p>

<p>To tightly control the order of execution, in newer versions we can configure <code class="highlighter-rouge">add_deps("bar", {order = true})</code> to tell xmake that we need to execute scripts at the same level according to the order of dependencies.</p>

<p>Example.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="p">{</span><span class="n">order</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="n">on_build_file</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>

<span class="n">rule</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">on_build_file</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>bar’s <code class="highlighter-rouge">on_build_file</code> will be executed first.</p>

<h3 id="better-dynamic-configuration-of-targets-and-rules">Better dynamic configuration of targets and rules</h3>

<p>The above way of controlling rule dependencies only works if both foo and bar rules are custom rules, which doesn’t work if you want to insert your own rules to be executed before xmake’s built-in rules.</p>

<p>In this case, we need to use a more flexible dynamic rule creation and injection approach to modify the built-in rules.</p>

<p>For example, if we want to execute the <code class="highlighter-rouge">on_build_file</code> script for a custom cppfront rule before the built-in <code class="highlighter-rouge">c++.build</code> rule, we can do this in the following way.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"cppfront"</span><span class="p">)</span>
    <span class="n">set_extensions</span><span class="p">(</span><span class="s2">".cpp2"</span><span class="p">)</span>
    <span class="n">on_load</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">target</span><span class="p">:</span><span class="n">rule</span><span class="p">(</span><span class="s2">"c++.build"</span><span class="p">):</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">rule</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"deps"</span><span class="p">,</span> <span class="s2">"cppfront"</span><span class="p">,</span> <span class="p">{</span><span class="n">order</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
        <span class="n">target</span><span class="p">:</span><span class="n">rule_add</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
    <span class="n">on_build_file</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">,</span> <span class="n">opt</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"build cppfront file"</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"cppfront"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp2"</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="support-for-introducing-custom-rules-from-packages">Support for introducing custom rules from packages</h3>

<p>Now, we can also add custom build rule scripts to the package management repository to enable dynamic distribution and installation following the package.</p>

<p>We need to put the custom rules into the <code class="highlighter-rouge">packages/x/xxx/rules</code> directory of the repository and it will follow the package as it is installed.</p>

<p>It does, of course, have some limitations.</p>

<ul>
  <li>In package rules, we cannot add <code class="highlighter-rouge">on_load</code>, <code class="highlighter-rouge">after_load</code> scripts, but we can usually use <code class="highlighter-rouge">on_config</code> instead.</li>
</ul>

<h4 id="adding-package-rules">Adding package rules</h4>

<p>We need to add the rules script to the rules fixed directory, for example: packages/z/zlib/rules/foo.lua</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"foo: on_config %s"</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span><span class="n">name</span><span class="p">())</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="applying-package-rules">Applying package rules</h4>

<p>The rules are used in a similar way as before, the only difference being that we need to specify which package’s rules to access by prefixing them with <code class="highlighter-rouge">@packagename/</code>.</p>

<p>The exact format: <code class="highlighter-rouge">add_rules("@packagename/rulename")`, for example:</code>add_rules(“@zlib/foo”)`.</p>

<p>``lua
add_requires(“zlib”, {system = false})
target(“test”)
    set_kind(“binary”)
    add_files(“src/*.cpp”)
    add_packages(“zlib”)
    add_rules(“@zlib/foo”)</p>
<div class="highlighter-rouge"><pre class="highlight"><code>
#### Referencing rules by package alias

If a package alias exists, xmake will give preference to the package alias to get the rules.

``` lua
add_requires("zlib", {alias = "zlib2", system = false})
target("test")
    set_kind("binary")
    add_files("src/*.cpp")
    add_packages("zlib2")
    add_rules("@zlib2/foo")
</code></pre>
</div>

<h4 id="adding-package-rule-dependencies">Adding package rule dependencies</h4>

<p>We can use <code class="highlighter-rouge">add_deps("@bar")</code> to add additional rules relative to the current package directory.</p>

<p>However, we cannot add rule dependencies from other packages, they are completely isolated and we can only refer to rules from other packages imported by <code class="highlighter-rouge">add_requires</code> in the user project.</p>

<p>packages/z/zlib/rules/foo.lua</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"@bar"</span><span class="p">)</span>
    <span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"foo: on_config %s"</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span><span class="n">name</span><span class="p">())</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>packages/z/zlib/rules/bar.lua</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"bar: on_config %s"</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span><span class="n">name</span><span class="p">())</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="stricter-package-dependency-compatibility-support">Stricter package dependency compatibility support</h3>

<p>Two new package related policies have been added to enable stricter package dependency compatibility control.</p>

<p>This is to address the fact that some packages may have abi incompatibilities or break other packages that depend on them every time they are updated, and by default Xmake will not recompile and install them unless their versions and configurations are also updated.</p>

<p>There is a chance that the compilation compatibility will be broken and the link will fail.</p>

<h4 id="packagelibrarydepsstrict_compatibility">package.librarydeps.strict_compatibility</h4>

<p>is disabled by default, if enabled then strict compatibility is maintained between the current package and all its library dependencies, and any version update of a dependent package will force a recompile install of the current package.</p>

<p>This ensures that all packages are binary compatible and that no linking and runtime errors occur when linking with other installed packages due to changes to the interface of a dependent package.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="s2">"zoo"</span><span class="p">)</span>
    <span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.librarydeps.strict_compatibility"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</code></pre>
</div>

<p>For example, if there is an updated version of bar or zoo, then foo will also be recompiled and installed.</p>

<h4 id="packagestrict_compatibility">package.strict_compatibility</h4>

<p>is disabled by default, if it is enabled then strict compatibility is maintained between the current package and all other packages that depend on it, and any version update of this package will force a recompile and install of the other parent packages.</p>

<p>This ensures that all packages are binary compatible and that no linking and runtime errors occur when linking with other installed packages due to changes in the interface of a dependent package.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.strict_compatibility"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

<span class="n">package</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>

<span class="n">package</span><span class="p">(</span><span class="s2">"zoo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
</code></pre>
</div>

<p>For example, if there is an updated version of foo, then both bar and zoo will be forced to recompile and install.</p>

<h4 id="packageinstall_always">package.install_always</h4>

<p>This is useful for local integration of third-party source packages,
as the package will always be reinstalled each time <code class="highlighter-rouge">xmake f -c</code> is run to reconfigure it.</p>

<p>As the user may at any time need to modify the third party source code and recompile it for integration.</p>

<p>Previously it was only possible to trigger a recompile by changing the package version number each time,
but with this strategy it is possible to trigger a recompile each time.</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_rules</span><span class="p">(</span><span class="s2">"mode.debug"</span><span class="p">,</span> <span class="s2">"mode.release"</span><span class="p">)</span>

<span class="n">package</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"cmake"</span><span class="p">)</span>
    <span class="n">set_sourcedir</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">scriptdir</span><span class="p">(),</span> <span class="s2">"foo"</span><span class="p">))</span>
    <span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.install_always"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="n">on_install</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">configs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">table.insert</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="s2">"-DCMAKE_BUILD_TYPE="</span> <span class="p">.</span> <span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">debug</span><span class="p">()</span> <span class="ow">and</span> <span class="s2">"Debug"</span> <span class="ow">or</span> <span class="s2">"Release"</span><span class="p">))</span>
        <span class="nb">table.insert</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="s2">"-DBUILD_SHARED_LIBS="</span> <span class="o">...</span> <span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">config</span><span class="p">(</span><span class="s2">"shared"</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">"ON"</span> <span class="ow">or</span> <span class="s2">"OFF"</span><span class="p">))</span>
        <span class="n">import</span><span class="p">(</span><span class="s2">"package.tools.cmake"</span><span class="p">).</span><span class="n">install</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">configs</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
    <span class="n">on_test</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">has_cfuncs</span><span class="p">(</span><span class="s2">"add"</span><span class="p">,</span> <span class="p">{</span><span class="n">includes</span> <span class="o">=</span> <span class="s2">"foo.h"</span><span class="p">}))</span>
    <span class="k">end</span><span class="p">)</span>
<span class="n">package_end</span><span class="p">()</span>

<span class="n">add_requires</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"demo"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/main.c"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="adding-the-clang-cl-toolchain">Adding the clang-cl toolchain</h3>

<p>Although we did support switching to the clang-cl compiler in previous versions, the switch was cumbersome and had to be set up one by one.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake f --cxx<span class="o">=</span>clang-cl --cc<span class="o">=</span>clang-cl -c
<span class="gp">$ </span>xmake
</code></pre>
</div>

<p>And you have to add the directory where clang-cl.exe is located to %PATH% to make it work.</p>

<p>Now that vs comes with the clang-cl toolchain, Xmake is fully capable of detecting it and using it automatically.</p>

<p>So, in this new version, we have added the clang-cl toolchain, and all it takes is <code class="highlighter-rouge">xmake f --toolchain=clang-cl</code> to quickly switch to the clang-cl toolchain without any PATH settings.</p>

<h2 id="changelog">Changelog</h2>

<h3 id="new-features">New features</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/2140">#2140</a>: Support Windows Arm64</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2719">#2719</a>: Add <code class="highlighter-rouge">package.librarydeps.strict_compatibility</code> to strict compatibility for package linkdeps</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2810">#2810</a>: Support os.execv to run shell script file</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2817">#2817</a>: Improve rule to support dependence order</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2824">#2824</a>: Pass cross-file to meson.install and trybuild</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2856">#2856</a>: Improve to debug package using the debug source directory</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2859">#2859</a>: Improve trybuild to build 3rd source library using xmake-repo scripts</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2879">#2879</a>: Support for dynamic creation and injection of rules and targets in script scope</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2374">#2374</a>: Allow xmake package to embed rules and scripts</li>
  <li>Add clang-cl toolchain</li>
</ul>

<h3 id="changes">Changes</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/pull/2745">#2745</a>: Improve os.cp to support symlink</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2773">#2773</a>: Improve vcpkg packages to support freebsd</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2778">#2778</a>: Improve Improve xrepo.env for target</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2783">#2783</a>: Add digest algorithm option for wdk signtool</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2787">#2787</a>: Improve json to support empty array</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2782">#2782</a>: Improve to find matlab and runtime</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2793">#2793</a>: Improve mconfdialog</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2804">#2804</a>: Support macOS arm64/x86_64 cross-compilation for installing packages</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2809">#2809</a>: Improve cl optimization option</li>
  <li>Improve trybuild for meson/cmake/autoconf</li>
  <li><a href="https://github.com/xmake-io/xmake/discussions/2846">#2846</a>: Improve to generate config files</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2866">#2866</a>: Better control over the order of execution of rules</li>
</ul>

<h3 id="bugs-fixed">Bugs fixed</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/2740">#2740</a>: Fix build c++ modules stuck and slower for msvc</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2875">#2875</a>: Fix build linux driver error</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2885">#2885</a>: Fix pch not found with msvc/ccache</li>
</ul>

        </article>
        <hr>

        <!-- baidu ads -->
        

        
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
                    
                    <h2 id="chinese">中文</h2>
                    <ul>
                    
                    <li class="relatedPost">
                        <a href="/cn/2022/10/09/xmake-update-v2.7.2/">Xmake v2.7.2 发布，更加智能化构建第三方库
                        
                        </a>
                    </li>
                    
                    
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
        
            </ul>
        

        
        
            
            
            
            
        
            
        
            
            
            
            
        
            
        
            
            
            
                
                    
                        
                        <h2 id="similar_posts">Similar Posts</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="/2022/11/08/xmake-update-v2.7.3/">Xmake v2.7.3 Released, Package Components and C++ Modules Incremental Build Support
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2022/08/25/xmake-update-v2.7.1/">Xmake v2.7.1 Released, Better C++ Modules Support
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2022/05/24/xmake-update-v2.6.6/">Xmake v2.6.6 Released, Support Distributed Compilation and Build Cache
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">

        

        

        
        
        

        

        

        
        
        <p><strong>Prev Post</strong> <a href="/2022/08/25/xmake-update-v2.7.1/">Xmake v2.7.1 Released, Better C++ Modules Support</a></p>
        
    </div>

    <div class="nex">

        

        

        
        
        

        

        

        
        
        <p><strong>Next Post</strong> <a href="/2022/11/08/xmake-update-v2.7.3/">Xmake v2.7.3 Released, Package Components and C++ Modules Incremental Build Support</a></p>
        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        









    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">


            <!-- codefund ads -->
            

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#chinese">中文</a></li>
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>

            <!-- baidu ads -->
            

            <br>
            <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul class="content-ul">
                  <li><a href="http://github.com/waruqi/tbox">tbox</a></li>
                  <li><a href="http://www.xmake.io">xmake</a></li>
                  <li><a href="https://github.com/waruqi">github</a></li>
                </ul>
            </div> 

            <!-- google ads -->
            

            <!-- baidu ads -->
            

            <!-- chitika ads -->
            
        </div>
    </div>

    <!-- baidu ads -->
    
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>



    <footer class="site-footer">
    <div class="wrapper">
        <p class="description">
             Copyright (c) 2016-latest tboox.org 
        </p>
        <p class="contact">
            
            <a href="https://github.com/waruqi" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a> 
             
            
            <a href="mailto:waruqi@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a> 
            
            
            <a href="https://twitter.com/waruqi" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a> 
            
            <a href="/feed.xml" title="feed"><i class="fa fa-feed" aria-hidden="true"></i></a> 
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/Gaohaoyang">HyG</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
        </p>
    </div>
</footer>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
