{% if site.changyan_appid %}
{% if page.url contains '/cn/' %}
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = '{{site.changyan_appid}}'; 
var conf = '{{site.changyan_appkey}}'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
{% endif %}
{% endif %}

{% if site.disqus_shortname %}
{% unless page.url contains '/cn/' %}
<div id="disqus_thread"></div>
<script>
    /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function() {
        this.page.url = '{{ site.url }}{{ page.url }}'; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '{{ site.url }}{{ page.url }}'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
            s = d.createElement('script');

        s.src = '//{{site.disqus_shortname}}.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
{% endunless %}
{% endif %}

{% if site.valine_appid %}
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>

<div id="valine_thread"></div>
{% if page.url contains '/cn/' %}
<script>
    var valine = new Valine();
    valine.init({
        el: '#valine_thread',
        appId: '{{site.valine_appid}}',
        appKey: '{{site.valine_appkey}}',
        notify:true,
        placeholder: '欢迎来到TBOOX开源工程!',
        lang:'zh-cn',
        avatar:'mm' 
    })
</script>
{% else %}
<script>
    var valine = new Valine();
    valine.init({
        el: '#valine_thread',
        appId: '{{site.valine_appid}}',
        appKey: '{{site.valine_appkey}}',
        notify:true,
        placeholder: 'Welcome to TBOOX Open Source Project!',
        lang:'en',
        avatar:'mm' 
    })
</script>
{% endif %}
{% endif %}

{% if site.gitalk_appid %}
<div id="gitalk-container"></div>
<link rel="stylesheet" href="/css/gitalk.css">
<script src="/js/gitalk.min.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '{{site.gitalk_appid}}',
  clientSecret: '{{site.gitalk_appkey}}',
  repo: 'tboox.github.io',
  owner: 'waruqi',
  admin: ['waruqi'],
  id: location.pathname,      
  distractionFreeMode: false  
})

gitalk.render('gitalk-container')
</script>
{% endif %}

