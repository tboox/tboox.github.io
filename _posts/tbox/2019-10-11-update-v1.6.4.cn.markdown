---
layout: post.cn
title:  "tbox v1.6.4更新，新增c11风格原子操作"
tags: tbox 稳定性修复 版本更新 原子 字符集编码
categories: tbox
---

此版本主要改进stream/stdio读写，字符集编码转换等操作，并重构整个原子操作实现，新增了c11风格atomic api来更细粒度控制。

* [项目源码](https://github.com/tboox/tbox)
* [官方文档](https://tboox.io/#/zh-cn/)

### 新特性

* [#70](https://github.com/tboox/tbox/issues/70): 添加`tb_stream_init_from_sock_ref()`接口去直接打开一个socket作为stream去读取数据。
* 添加stdfile接口去读写stdin, stdout和stderr。
* [#81](https://github.com/tboox/tbox/issues/81): 添加对进程和线程的cpu亲缘性设置和获取
* 添加filelock文件锁跨平台api接口
* 添加匿名管道，命名管道支持

### 改进

* 优化queue_buffer模块
* 改进stream接口实现
* 改进字符集编码转换，以及增加对ANSI编码的支持
* 改进原子操作，并增加c11风格原子接口
* 改进spinlock实现
* 新增进程输出重定向到管道
* 针对协程栈使用虚拟内存
* 改进基于openssl/mbedtls的https访问

### 源码

* [Github](https://github.com/tboox/tbox)
* [Gitee](https://gitee.com/tboox/tbox)

