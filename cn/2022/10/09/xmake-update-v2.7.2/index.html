<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Xmake v2.7.2 发布，更加智能化构建第三方库</title>
    <meta name="description" content="Xmake 是一个基于 Lua 的轻量级跨平台构建工具。它非常的轻量，没有任何依赖，因为它内置了 Lua 运行时。它使用 xmake.lua 维护项目构建，相比 makefile/CMakeLists.txt，配置语法更加简洁直观，对新手非常友好，短时间内就能快速入门，能够让用户把更多的精力集中在实际的项目开发上...">

    
    <meta name="keywords" content="xmake,lua,C/C++,trybuild,rule,cmake,autoconf,tboox" />

    <!-- qq oauth -->
    <meta property="qc:admins" content="5211601217706727767255" />

    <!--icon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" sizes="192x192" href="/static/img/nice-highres.png" />
	<link rel="apple-touch-icon-precomposed" href="/static/img/apple-touch-icon-57x57-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/img/apple-touch-icon-72x72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/img/apple-touch-icon-114x114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/img/apple-touch-icon-144x144-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="/static/img/retinahd_icon.png" />
	<meta name="msapplication-TileImage" content="/static/img/retinahd_icon.png" />

    <link rel="stylesheet" href=" /css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="https://tboox.org/cn/2022/10/09/xmake-update-v2.7.2/">
    <link rel="alternate" type="application/rss+xml" title="TBOOX Open Source Project" href="https://tboox.org/feed.xml ">
    <link rel="alternate" hreflang="en" href="https://tboox.org/" />
    <link rel="alternate" hreflang="zh-Hans" href="https://tboox.org/cn/" />

    <!-- css -->
    <link href="/css/reward.css" rel="stylesheet" type="text/css">




    <script type="text/javascript">
    function isPC(){
        var userAgentInfo = navigator.userAgent;
        var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");
        var flag = true;
        for (var v = 0; v < Agents.length; v++) {
            if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }
        }
        return flag;
    }
    </script>

<!-- wwads -->

    <script type="text/javascript" charset="UTF-8" src="https://cdn.wwads.cn/js/makemoney.js" async></script>


<!-- baidu ads -->



    <!-- baidu ads -->

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/cn" class="brand">TBOOX</a>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/?lang=0">
                    
                        <i class="fa fa-home"></i>English
                    </a>
                </li>

                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/project/">
                            
                        
                            <i class="fa fa-bookmark"></i>项目
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/archive/">
                            
                        
                            <i class="fa fa-archive"></i>归档
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/category/">
                            
                        
                            <i class="fa fa-th-list"></i>分类
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/tag/">
                            
                        
                            <i class="fa fa-tags"></i>标记
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/docs/">
                            
                        
                            <i class="fa fa-book"></i>文档
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="https://xmake.io/#/zh-cn/about/contact" target="_blank" >
                            
                        
                            <i class="fa fa-forumbee"></i>社区
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/donation/">
                            
                        
                            <i class="fa fa-heart"></i>捐助
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                    
                    <li>
                        
                            
                            <a href="/cn/about/">
                            
                        
                            <i class="fa fa-user"></i>关于
                        </a>
                    </li>
                    
                    
                
                    
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                    
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>



        <div class="page clearfix" post>
    <div class="left">
        <h1>Xmake v2.7.2 发布，更加智能化构建第三方库</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2022-10-09
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#xmake" title="Category: xmake" rel="category">xmake</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a-->
        <a href="/cn/tag/#xmake" title="Tag: xmake" rel="tag">xmake</a>&nbsp;
    
        <!--a href="/tag/#lua" title="Tag: lua" rel="tag">lua</a-->
        <a href="/cn/tag/#lua" title="Tag: lua" rel="tag">lua</a>&nbsp;
    
        <!--a href="/tag/#C%2FC%2B%2B" title="Tag: C/C++" rel="tag">C/C++</a-->
        <a href="/cn/tag/#C/C++" title="Tag: C/C++" rel="tag">C/C++</a>&nbsp;
    
        <!--a href="/tag/#trybuild" title="Tag: trybuild" rel="tag">trybuild</a-->
        <a href="/cn/tag/#trybuild" title="Tag: trybuild" rel="tag">trybuild</a>&nbsp;
    
        <!--a href="/tag/#rule" title="Tag: rule" rel="tag">rule</a-->
        <a href="/cn/tag/#rule" title="Tag: rule" rel="tag">rule</a>&nbsp;
    
        <!--a href="/tag/#cmake" title="Tag: cmake" rel="tag">cmake</a-->
        <a href="/cn/tag/#cmake" title="Tag: cmake" rel="tag">cmake</a>&nbsp;
    
        <!--a href="/tag/#autoconf" title="Tag: autoconf" rel="tag">autoconf</a-->
        <a href="/cn/tag/#autoconf" title="Tag: autoconf" rel="tag">autoconf</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <p><a href="https://github.com/xmake-io/xmake">Xmake</a> 是一个基于 Lua 的轻量级跨平台构建工具。</p>

<p>它非常的轻量，没有任何依赖，因为它内置了 Lua 运行时。</p>

<p>它使用 xmake.lua 维护项目构建，相比 makefile/CMakeLists.txt，配置语法更加简洁直观，对新手非常友好，短时间内就能快速入门，能够让用户把更多的精力集中在实际的项目开发上。</p>

<p>我们能够使用它像 Make/Ninja 那样可以直接编译项目，也可以像 CMake/Meson 那样生成工程文件，另外它还有内置的包管理系统来帮助用户解决 C/C++ 依赖库的集成使用问题。</p>

<p>目前，Xmake 主要用于 C/C++ 项目的构建，但是同时也支持其他 native 语言的构建，可以实现跟 C/C++ 进行混合编译，同时编译速度也是非常的快，可以跟 Ninja 持平。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake = Build backend + Project Generator + Package Manager + [Remote|Distributed] Build + Cache
</code></pre>
</div>

<p>尽管不是很准确，但我们还是可以把 Xmake 按下面的方式来理解：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Xmake ~= Make/Ninja + CMake/Meson + Vcpkg/Conan + distcc + ccache/sccache
</code></pre>
</div>

<ul>
  <li><a href="https://github.com/xmake-io/xmake">项目源码</a></li>
  <li><a href="https://xmake.io/#/zh-cn/">官方文档</a></li>
  <li><a href="https://xmake.io/#/zh-cn/about/course">入门课程</a></li>
</ul>

<h2 id="新特性介绍">新特性介绍</h2>

<h3 id="更加智能化构建第三方库">更加智能化构建第三方库</h3>

<p>在先前的版本中，Xmake 提供了一种 TryBuild 模式，可以在没有 xmake.lua 的情况下，使用 Xmake 尝试对 autoconf/cmake/meson 等维护的第三方项目进行直接构建。</p>

<p>其实，也就是让 Xmake 检测到对应的构建系统后，调用 cmake 等命令来实现，但是会帮助用户简化配置操作，另外还能对接 xmake 的交叉编译工具链配置。</p>

<p>但是，这种模式有一定的失败率，比如以下一些情况，都会可能导致构建失败：</p>

<ol>
  <li>项目代码自身存在缺陷，导致编译错误</li>
  <li>项目代码不支持当前平台</li>
  <li>构建脚本存在缺陷</li>
  <li>缺少特定的配置参数</li>
  <li>缺少依赖库，需要用户手动安装</li>
  <li>编译器版本太低，不支持部分代码</li>
</ol>

<p>而 TryBuild 模式通常处理这些情况，但是在新版本中，我们对 TryBuild 模式引入了一种新的机制，通过复用 <a href="https://github.com/xmake-io/xmake-repo">xmake-repo</a> 仓库中的构建脚本，来改进构建逻辑。</p>

<p>它大概得处理流程是这样子的：</p>

<ol>
  <li>在第三方源码库目录执行 xmake 命令</li>
  <li>Xmake 获取目录名，尝试解析项目名和版本</li>
  <li>尝试从 xmake-repo 仓库匹配现有的包</li>
  <li>如果匹配成功，直接采用包中构建逻辑来构建</li>
  <li>如果没匹配成功，回退到原来的 TryBuild 逻辑</li>
</ol>

<p>这能带来什么好处呢，如果匹配成功，我们能够解决上面提到的各种问题。</p>

<p>即使当前项目源码不支持指定平台，或者源码和构建脚本存在一定的缺陷，Xmake 也能自动打入特定 patch 去修复它，并引入需要的依赖包，确保它肯定能够一键编译通过。</p>

<p>我们使用 libjpeg 库为例，来直观的感受下。</p>

<h4 id="首先是下载对应源码包">首先是下载对应源码包</h4>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>wget https://jaist.dl.sourceforge.net/project/libjpeg-turbo/2.1.4/libjpeg-turbo-2.1.4.tar.gz
<span class="gp">$ </span>tar -xvf libjpeg-turbo-2.1.4.tar.gz
<span class="gp">$ </span><span class="nb">cd </span>libjpeg-turbo-2.1.4
</code></pre>
</div>

<h4 id="然后进入目录执行-xmake-命令">然后进入目录执行 Xmake 命令</h4>

<p>Xmake 如果检测到是 libjpeg 库，就会提示用户，是否作为 libjpeg 2.1.4 来构建。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>ruki-2:libjpeg-turbo-2.1.4 ruki<span class="nv">$ </span>xmake
note: libjpeg-turbo 2.1.4 <span class="k">in </span>xmake-repo found, try building it or you can run <span class="sb">`</span>xmake f --trybuild<span class="o">=</span><span class="sb">`</span> to <span class="nb">set </span>buildsystem <span class="o">(</span>pass -y or --confirm<span class="o">=</span>y/n/d to skip confirm<span class="o">)</span>?
please input: y <span class="o">(</span>y/n<span class="o">)</span>
</code></pre>
</div>

<p>我们按下回车键确认继续构建。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>checking <span class="k">for </span>cmake ... /usr/local/bin/cmake
/usr/local/bin/cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DENABLE_SHARED<span class="o">=</span>OFF -DENABLE_STATIC<span class="o">=</span>ON -DCMAKE_POSITION_INDEPENDENT_CODE<span class="o">=</span>ON -DCMAKE_INSTALL_LIBDIR:PATH<span class="o">=</span>lib -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2 -G <span class="s2">"Unix Makefiles"</span> -DCMAKE_POSITION_INDEPENDENT_CODE<span class="o">=</span>ON /Users/ruki/Downloads/libjpeg-turbo-2.1.4
-- CMAKE_BUILD_TYPE <span class="o">=</span> Release
-- VERSION <span class="o">=</span> 2.1.4, BUILD <span class="o">=</span> 20220923
-- 64-bit build <span class="o">(</span>x86_64<span class="o">)</span>
-- CMAKE_INSTALL_PREFIX <span class="o">=</span> /Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2
-- CMAKE_INSTALL_BINDIR <span class="o">=</span> bin <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/bin<span class="o">)</span>
-- CMAKE_INSTALL_DATAROOTDIR <span class="o">=</span> share <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/share<span class="o">)</span>
-- CMAKE_INSTALL_DOCDIR <span class="o">=</span> share/doc/libjpeg-turbo <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/share/doc/libjpeg-turbo<span class="o">)</span>
-- CMAKE_INSTALL_INCLUDEDIR <span class="o">=</span> include <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/include<span class="o">)</span>
-- CMAKE_INSTALL_LIBDIR <span class="o">=</span> lib <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/lib<span class="o">)</span>
-- CMAKE_INSTALL_MANDIR <span class="o">=</span> share/man <span class="o">(</span>/Users/ruki/.xmake/packages/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2/share/man<span class="o">)</span>
-- Shared libraries disabled <span class="o">(</span>ENABLE_SHARED <span class="o">=</span> 0<span class="o">)</span>
-- Static libraries enabled <span class="o">(</span>ENABLE_STATIC <span class="o">=</span> 1<span class="o">)</span>
-- 12-bit JPEG support disabled <span class="o">(</span>WITH_12BIT <span class="o">=</span> 0<span class="o">)</span>
-- Arithmetic decoding support enabled <span class="o">(</span>WITH_ARITH_DEC <span class="o">=</span> 1<span class="o">)</span>
-- Arithmetic encoding support enabled <span class="o">(</span>WITH_ARITH_ENC <span class="o">=</span> 1<span class="o">)</span>
-- TurboJPEG API library enabled <span class="o">(</span>WITH_TURBOJPEG <span class="o">=</span> 1<span class="o">)</span>
-- TurboJPEG Java wrapper disabled <span class="o">(</span>WITH_JAVA <span class="o">=</span> 0<span class="o">)</span>
-- In-memory <span class="nb">source</span>/destination managers enabled <span class="o">(</span>WITH_MEM_SRCDST <span class="o">=</span> 1<span class="o">)</span>
-- Emulating libjpeg API/ABI v6.2 <span class="o">(</span>WITH_JPEG7 <span class="o">=</span> 0, WITH_JPEG8 <span class="o">=</span> 0<span class="o">)</span>
-- libjpeg API shared library version <span class="o">=</span> 62.3.0
-- Compiler flags <span class="o">=</span>  -O3 -DNDEBUG
-- Linker flags <span class="o">=</span>
-- INLINE <span class="o">=</span> __inline__ __attribute__<span class="o">((</span>always_inline<span class="o">))</span> <span class="o">(</span>FORCE_INLINE <span class="o">=</span> 1<span class="o">)</span>
-- THREAD_LOCAL <span class="o">=</span> __thread
-- CMAKE_EXECUTABLE_SUFFIX <span class="o">=</span>
-- CMAKE_ASM_NASM_COMPILER <span class="o">=</span> /usr/local/bin/nasm
-- CMAKE_ASM_NASM_OBJECT_FORMAT <span class="o">=</span> macho64
-- CMAKE_ASM_NASM_FLAGS <span class="o">=</span>  -DMACHO -D__x86_64__ -DPIC
-- SIMD extensions: x86_64 <span class="o">(</span>WITH_SIMD <span class="o">=</span> 1<span class="o">)</span>
-- FLOATTEST <span class="o">=</span> sse
-- Configuring <span class="k">done</span>
-- Generating <span class="k">done</span>
-- Build files have been written to: /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build_646b7957
make -j10
<span class="o">[</span>  2%] Built target md5cmp
<span class="o">[</span> 19%] Built target wrjpgcom
<span class="o">[</span> 20%] Built target simd
<span class="o">[</span> 21%] Built target strtest
<span class="o">[</span> 22%] Built target rdjpgcom
<span class="o">[</span> 80%] Built target jpeg-static
<span class="o">[</span> 84%] Built target turbojpeg-static
<span class="o">[</span> 90%] Built target tjbench-static
<span class="o">[</span> 90%] Built target tjunittest-static
<span class="o">[</span> 91%] Built target jpegtran-static
<span class="o">[</span> 98%] Built target djpeg-static
<span class="o">[</span>100%] Built target cjpeg-static
make install
<span class="o">[</span>  1%] Built target strtest
<span class="o">[</span>  3%] Built target wrjpgcom
<span class="o">[</span> 19%] Built target simd
<span class="o">[</span> 52%] Built target turbojpeg-static
<span class="o">[</span> 53%] Built target rdjpgcom
<span class="o">[</span> 82%] Built target jpeg-static
<span class="o">[</span> 85%] Built target jpegtran-static
<span class="o">[</span> 90%] Built target djpeg-static
<span class="o">[</span> 93%] Built target tjunittest-static
<span class="o">[</span> 97%] Built target cjpeg-static
<span class="o">[</span> 98%] Built target tjbench-static
<span class="o">[</span>100%] Built target md5cmp
Install the project...
exporting libjpeg-turbo-2.1.4
  -&gt; /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts/l/libjpeg-turbo/2.1.4/646b795702e34be89c5745333d052aa2
output to /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts
build ok!
</code></pre>
</div>

<p>只要检测匹配成功，通常肯定能够完成编译，成功率接近 100%，最后 Xmake 会将编译产物输出到当前目录的 <code class="highlighter-rouge">build/artifacts</code> 下面。</p>

<h4 id="对接交叉编译工具链">对接交叉编译工具链</h4>

<p>这种智能构建模式，我们不仅能够编译本机程序，还可以对接交叉编译工具链，实现对 ios/android 以及任意交叉编译平台的支持。</p>

<p>例如，编译 Android 平台，我们只需要传递 <code class="highlighter-rouge">--trybuild=xrepo</code> 参数，然后切换到 android 平台即可，Xmake 会透传所有 ndk 工具链信息。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake f -p android --trybuild<span class="o">=</span>xrepo --ndk<span class="o">=</span>~/files/android-ndk-r20b -c
<span class="gp">$ </span>xmake
xmake f -c --require<span class="o">=</span>n -v -p android -a armeabi-v7a -m release -k static --ndk<span class="o">=</span>/Users/ruki/files/android-ndk-r20b
checking <span class="k">for </span>Android SDK directory ... ~/Library/Android/sdk
checking <span class="k">for </span>Build Tools Version of Android SDK ... 33.0.0
checking <span class="k">for </span>NDK directory ... /Users/ruki/files/android-ndk-r20b
checking <span class="k">for </span>SDK version of NDK ... 21
checking <span class="k">for </span>clang++ ... /Users/ruki/files/android-ndk-r20b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++
checking <span class="k">for </span>the shared library linker <span class="o">(</span>sh<span class="o">)</span> ... clang++
checking <span class="k">for </span>clang++ ... /Users/ruki/files/android-ndk-r20b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++
checking <span class="k">for </span>the linker <span class="o">(</span>ld<span class="o">)</span> ... clang++
...
exporting libjpeg-turbo-2.1.4
  -&gt; /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts/l/libjpeg-turbo/2.1.4/79c2e21f436b4ab08a3c23a6cbae8c0e
output to /Users/ruki/Downloads/libjpeg-turbo-2.1.4/build/artifacts
build ok!
</code></pre>
</div>

<h4 id="回退到直接编译">回退到直接编译</h4>

<p>如果我们不想使用 xmake-repo 的构建脚本，我们也能回退到 cmake/autoconf 直接去尝试构建它们。</p>

<p>但是这样可能会存在一定的失败率，并且有可能会额外编译一些不需要的二进制目标。而 xmake-repo 里面的构建脚本是最优化的，精简了很多没必要的构建参数，比如禁用 tests/examples 构建等等。</p>

<p>我们只需要先敲 n 取消基于包脚本的智能构建模式，Xmake 会有新的提示，让用户选择是否继续采用 cmake/autoconf 来尝试构建。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake
note: libjpeg-turbo 2.1.4 <span class="k">in </span>xmake-repo found, try building it or you can run <span class="sb">`</span>xmake f --trybuild<span class="o">=</span><span class="sb">`</span> to <span class="nb">set </span>buildsystem <span class="o">(</span>pass -y or --confirm<span class="o">=</span>y/n/d to skip confirm<span class="o">)</span>?
please input: y <span class="o">(</span>y/n<span class="o">)</span>
n
note: CMakeLists.txt found, try building it or you can run <span class="sb">`</span>xmake f --trybuild<span class="o">=</span><span class="sb">`</span> to <span class="nb">set </span>buildsystem <span class="o">(</span>pass -y or --confirm<span class="o">=</span>y/n/d to skip confirm<span class="o">)</span>?
please input: y <span class="o">(</span>y/n<span class="o">)</span>
</code></pre>
</div>

<h3 id="支持-windows-arm64">支持 Windows Arm64</h3>

<p>新版本我们还对 Windows 的构建支持做了改进，新增了 Windows Arm64 平台支持，只需要切换到 arm64 架构即可。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake f -a arm64
<span class="gp">$ </span>xmake
</code></pre>
</div>

<h3 id="改进规则支持依赖顺序执行">改进规则支持依赖顺序执行</h3>

<p>关联依赖可以绑定一批规则，也就是不必对 target 挨个去使用 <code class="highlighter-rouge">add_rules()</code> 添加规则，只需要应用一个规则，就能生效它和它的所有依赖规则。</p>

<p>例如：</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>

<span class="n">rule</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
   <span class="o">...</span>
</code></pre>
</div>

<p>我们只需要 <code class="highlighter-rouge">add_rules("foo")</code>，就能同时应用 foo 和 bar 两个规则。</p>

<p>但是，默认情况下，依赖之间是不存在执行的先后顺序的，foo 和 bar 的 <code class="highlighter-rouge">on_build_file</code> 等脚本是并行执行的，顺序未定义。</p>

<p>如果要严格控制执行顺序，在新版本中，我们可以配置 <code class="highlighter-rouge">add_deps("bar", {order = true})</code>，告诉 xmake，我们需要根据依赖顺序来执行同级别的脚本。</p>

<p>例如：</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="p">{</span><span class="n">order</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="n">on_build_file</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>

<span class="n">rule</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">on_build_file</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>bar 的 <code class="highlighter-rouge">on_build_file</code> 将会被先执行。</p>

<h3 id="更好的动态配置目标和规则">更好的动态配置目标和规则</h3>

<p>上面这种控制规则依赖的方式，只适合 foo 和 bar 两个规则都是自定义规则，如果想要将自己的规则插入到 xmake 的内置规则之前执行，这就不适用了。</p>

<p>这个时候，我们需要使用更加灵活的动态规则创建和注入的方式，去修改内置规则。</p>

<p>例如，我们想在内置的 <code class="highlighter-rouge">c++.build</code> 规则之前，执行自定义 cppfront 规则的 <code class="highlighter-rouge">on_build_file</code> 脚本，我们可以通过下面的方式来实现。</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"cppfront"</span><span class="p">)</span>
    <span class="n">set_extensions</span><span class="p">(</span><span class="s2">".cpp2"</span><span class="p">)</span>
    <span class="n">on_load</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">target</span><span class="p">:</span><span class="n">rule</span><span class="p">(</span><span class="s2">"c++.build"</span><span class="p">):</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">rule</span><span class="p">:</span><span class="n">add</span><span class="p">(</span><span class="s2">"deps"</span><span class="p">,</span> <span class="s2">"cppfront"</span><span class="p">,</span> <span class="p">{</span><span class="n">order</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
        <span class="n">target</span><span class="p">:</span><span class="n">rule_add</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
    <span class="n">on_build_file</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">,</span> <span class="n">opt</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"build cppfront file"</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"cppfront"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp2"</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="支持从包中引入自定义规则">支持从包中引入自定义规则</h3>

<p>现在，我们还可以在包管理仓库中，添加自定义构架规则脚本，实现跟随包进行动态下发和安装。</p>

<p>我们需要将自定义规则放到仓库的 <code class="highlighter-rouge">packages/x/xxx/rules</code> 目录中，它会跟随包一起被安装。</p>

<p>当然，它也存在一些限制：</p>

<ul>
  <li>在包中规则，我们不能添加 <code class="highlighter-rouge">on_load</code>, <code class="highlighter-rouge">after_load</code> 脚本，但是通常我们可以使用 <code class="highlighter-rouge">on_config</code> 来代替。</li>
</ul>

<h4 id="添加包规则">添加包规则</h4>

<p>我们需要将规则脚本添加到 rules 固定目录下，例如：packages/z/zlib/rules/foo.lua</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"foo: on_config %s"</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span><span class="n">name</span><span class="p">())</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="应用包规则">应用包规则</h4>

<p>使用规则的方式跟之前类似，唯一的区别就是，我们需要通过 <code class="highlighter-rouge">@packagename/</code> 前缀去指定访问哪个包里面的规则。</p>

<p>具体格式：<code class="highlighter-rouge">add_rules("@packagename/rulename")</code>，例如：<code class="highlighter-rouge">add_rules("@zlib/foo")</code>。</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_requires</span><span class="p">(</span><span class="s2">"zlib"</span><span class="p">,</span> <span class="p">{</span><span class="n">system</span> <span class="o">=</span> <span class="kc">false</span><span class="p">})</span>
<span class="n">target</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"zlib"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"@zlib/foo"</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="通过包别名引用规则">通过包别名引用规则</h4>

<p>如果存在一个包的别名，xmake 将优先考虑包的别名来获得规则。</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_requires</span><span class="p">(</span><span class="s2">"zlib"</span><span class="p">,</span> <span class="p">{</span><span class="n">alias</span> <span class="o">=</span> <span class="s2">"zlib2"</span><span class="p">,</span> <span class="n">system</span> <span class="o">=</span> <span class="kc">false</span><span class="p">})</span>
<span class="n">target</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/*.cpp"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"zlib2"</span><span class="p">)</span>
    <span class="n">add_rules</span><span class="p">(</span><span class="s2">"@zlib2/foo"</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="添加包规则依赖">添加包规则依赖</h4>

<p>我们可以使用<code class="highlighter-rouge">add_deps("@bar")</code>来添加相对于当前包目录的其他规则。</p>

<p>然而，我们不能添加来自其他包的规则依赖，它们是完全隔离的，我们只能参考用户项目中由<code class="highlighter-rouge">add_requires</code>导入的其他包的规则。</p>

<p>packages/z/zlib/rules/foo.lua</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"@bar"</span><span class="p">)</span>
    <span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"foo: on_config %s"</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span><span class="n">name</span><span class="p">())</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<p>packages/z/zlib/rules/bar.lua</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">rule</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">on_config</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"bar: on_config %s"</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span><span class="n">name</span><span class="p">())</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="更加严格的包依赖兼容性支持">更加严格的包依赖兼容性支持</h3>

<p>我们新增了两个包相关的策略，用于开启更加严格的包依赖兼容性控制。</p>

<p>这主要用于解决一些包每次版本更新，可能都会存在一些 abi 不兼容，或者破坏其他依赖它的包，而默认 Xmake 是不会去重新编译安装它们的，除非它们的版本和配置也被更新了。</p>

<p>这就可能存在一定概率编译兼容性被破坏，导致最终链接失败。</p>

<h4 id="packagelibrarydepsstrict_compatibility">package.librarydeps.strict_compatibility</h4>

<p>默认禁用，如果启用它，那么当前包和它的所有库依赖包之间会保持严格的兼容性，任何依赖包的版本更新，都会强制触发当前包的重新编译安装。</p>

<p>以确保所有的包都是二进制兼容的，不会因为某个依赖包接口改动，导致和其他已被安装的其他包一起链接时候，发生链接和运行错误。</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="s2">"zoo"</span><span class="p">)</span>
    <span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.librarydeps.strict_compatibility"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</code></pre>
</div>

<p>例如，如果 bar 或者 zoo 的版本有更新，那么 foo 也会重新编译安装。</p>

<h4 id="packagestrict_compatibility">package.strict_compatibility</h4>

<p>默认禁用，如果启用它，那么当前包和其他所有依赖它的包之间会保持严格的兼容性，这个包的版本更新，都会强制触发其他父包的重新编译安装。</p>

<p>以确保所有的包都是二进制兼容的，不会因为某个依赖包接口改动，导致和其他已被安装的其他包一起链接时候，发生链接和运行错误。</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">package</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.strict_compatibility"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

<span class="n">package</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>

<span class="n">package</span><span class="p">(</span><span class="s2">"zoo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
</code></pre>
</div>

<p>例如，如果 foo 的版本有更新，那么 bar 和 zoo 都会被强制重新编译安装。</p>

<h4 id="packageinstall_always">package.install_always</h4>

<p>每次运行 <code class="highlighter-rouge">xmake f -c</code> 重新配置的时候，总是会重新安装包，这对于本地第三方源码包集成时候比较有用。</p>

<p>因为，用户可能随时需要修改第三方源码，然后重新编译集成它们。</p>

<p>之前只能通过每次修改包版本号，来触发重新编译，但是有了这个策略，就能每次都会触发重编。</p>

<div class="language-lua highlighter-rouge"><pre class="highlight"><code><span class="n">add_rules</span><span class="p">(</span><span class="s2">"mode.debug"</span><span class="p">,</span> <span class="s2">"mode.release"</span><span class="p">)</span>

<span class="n">package</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
    <span class="n">add_deps</span><span class="p">(</span><span class="s2">"cmake"</span><span class="p">)</span>
    <span class="n">set_sourcedir</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">scriptdir</span><span class="p">(),</span> <span class="s2">"foo"</span><span class="p">))</span>
    <span class="n">set_policy</span><span class="p">(</span><span class="s2">"package.install_always"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="n">on_install</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">configs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">table.insert</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="s2">"-DCMAKE_BUILD_TYPE="</span> <span class="o">..</span> <span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">debug</span><span class="p">()</span> <span class="ow">and</span> <span class="s2">"Debug"</span> <span class="ow">or</span> <span class="s2">"Release"</span><span class="p">))</span>
        <span class="nb">table.insert</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="s2">"-DBUILD_SHARED_LIBS="</span> <span class="o">..</span> <span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">config</span><span class="p">(</span><span class="s2">"shared"</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">"ON"</span> <span class="ow">or</span> <span class="s2">"OFF"</span><span class="p">))</span>
        <span class="n">import</span><span class="p">(</span><span class="s2">"package.tools.cmake"</span><span class="p">).</span><span class="n">install</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">configs</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
    <span class="n">on_test</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">package</span><span class="p">:</span><span class="n">has_cfuncs</span><span class="p">(</span><span class="s2">"add"</span><span class="p">,</span> <span class="p">{</span><span class="n">includes</span> <span class="o">=</span> <span class="s2">"foo.h"</span><span class="p">}))</span>
    <span class="k">end</span><span class="p">)</span>
<span class="n">package_end</span><span class="p">()</span>

<span class="n">add_requires</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>

<span class="n">target</span><span class="p">(</span><span class="s2">"demo"</span><span class="p">)</span>
    <span class="n">set_kind</span><span class="p">(</span><span class="s2">"binary"</span><span class="p">)</span>
    <span class="n">add_files</span><span class="p">(</span><span class="s2">"src/main.c"</span><span class="p">)</span>
    <span class="n">add_packages</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)</span>
</code></pre>
</div>

<h3 id="新增-clang-cl-工具链">新增 clang-cl 工具链</h3>

<p>尽管之前的版本，我们也支持切换到 clang-cl 编译器，但是切换比较繁琐，得挨个设置。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>xmake f --cxx<span class="o">=</span>clang-cl --cc<span class="o">=</span>clang-cl -c
<span class="gp">$ </span>xmake
</code></pre>
</div>

<p>而且还得将 clang-cl.exe 所在目录加入 %PATH% 才行。</p>

<p>既然现在 vs 都自带了 clang-cl 工具链，那么 Xmake 完全可以自动检测到并使用它。</p>

<p>因此，在新版本中，我们新增了 clang-cl 工具链，仅仅只需要 <code class="highlighter-rouge">xmake f --toolchain=clang-cl</code> 就可以快速切换到 clang-cl 工具链，而无需任何 PATH 设置。</p>

<h2 id="更新内容">更新内容</h2>

<h3 id="新特性">新特性</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/2140">#2140</a>: 支持 Windows Arm64</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2719">#2719</a>: 添加 <code class="highlighter-rouge">package.librarydeps.strict_compatibility</code> 策略严格限制包依赖兼容性</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2810">#2810</a>: 支持 os.execv 去执行 shell 脚本文件</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2817">#2817</a>: 改进规则支持依赖顺序执行</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2824">#2824</a>: 传递 cross-file 交叉编译环境给 meson.install 和 trybuild</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2856">#2856</a>: xrepo 支持从当前指定源码目录调试程序</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2859">#2859</a>: 改进对三方库的 trybuild 构建，利用 xmake-repo 仓库脚本更加智能化地构建三方库</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2879">#2879</a>: 更好的动态创建和配置 target 和 rule</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2374">#2374</a>: 允许 xmake 包中引入自定义规则</li>
  <li>添加 clang-cl 工具链</li>
</ul>

<h3 id="改进">改进</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/pull/2745">#2745</a>: 改进 os.cp 支持符号链接复制</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2773">#2773</a>: 改进 vcpkg 包安装，支持 freebsd 平台</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2778">#2778</a>: 改进 xrepo.env 支持 target 的运行环境加载</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2783">#2783</a>: 添加摘要算法选项到 WDK 的 signtool 签名工具</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2787">#2787</a>: 改进 json 支持空数组</li>
  <li><a href="https://github.com/xmake-io/xmake/pull/2782">#2782</a>: 改进查找 matlib sdk 和运行时</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2793">#2793</a>: 改进 mconfdialog 配置操作体验</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2804">#2804</a>: 安装依赖包支持 macOS arm64/x86_64 交叉编译</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2809">#2809</a>: 改进 msvc 的编译优化选项</li>
  <li>改进 trybuild 模式，为 meson/autoconf/cmake 提供更好的交叉编译支持</li>
  <li><a href="https://github.com/xmake-io/xmake/discussions/2846">#2846</a>: 改进对 configfiles 的生成</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2866">#2866</a>: 更好地控制 rule 规则执行顺序</li>
</ul>

<h3 id="bugs-修复">Bugs 修复</h3>

<ul>
  <li><a href="https://github.com/xmake-io/xmake/issues/2740">#2740</a>: 修复 msvc 构建 C++ modules 卡死问题</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2875">#2875</a>: 修复构建 linux 驱动错误</li>
  <li><a href="https://github.com/xmake-io/xmake/issues/2885">#2885</a>: 修复 ccache 下，msvc 编译 pch 失败问题</li>
</ul>

        </article>
        <hr>

        <!-- wwads -->
        
        <div class="wwads-cn wwads-horizontal" data-id="243" style="max-width:100%"></div>
        

        <!-- baidu ads -->
        

        <!-- reward -->
        <div style="text-align: center;">
            <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
              <span>赏</span>
            </button>
            <div id="QR" style="display: none;">
                <div id="wechat" style="display: inline-block">
                  <img id="wechat_qr" src="/static/img/weixin.png" alt="WeChat Pay"/>
                  <p>微信打赏</p>
                </div>
                <div id="alipay" style="display: inline-block">
                  <img id="alipay_qr" src="/static/img/alipay.png" alt="Alipay"/>
                  <p>支付宝打赏</p>
                </div>
            </div>
        </div>

        
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
                    
                    <h2 id="english">English</h2>
                    <ul>
                    
                    <li class="relatedPost">
                        <a href="/2022/10/09/xmake-update-v2.7.2/">Xmake v2.7.2 released, build third-party libraries more intelligently
                        
                        </a>
                    </li>
                    
                    
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
            
            
                
            
        
            
        
        
            </ul>
        

        
        
            
        
            
            
            
                
                    
                        
                        <h2 id="similar_posts">相关文章</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="/cn/2023/12/15/xmake-update-v2.8.6/">Xmake v2.8.6 发布，新的打包插件：XPack
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/cn/2023/11/05/xmake-update-v2.8.5/">Xmake v2.8.5 发布，支持链接排序和单元测试
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/cn/2023/09/26/xmake-update-v2.8.3/">Xmake v2.8.3 发布，改进 Wasm 并支持 Xmake 源码调试
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/cn/2023/08/22/xmake-update-v2.8.2/">Xmake v2.8.2 发布，官方包仓库数量突破 1k
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
            
        
            
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/cn/2023/07/11/xmake-update-v2.8.1/">Xmake v2.8.1 发布，大量细节特性改进
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">

        

        

        
        
        

        

        

        
        
        <p><strong>上一篇</strong> <a href="/cn/2022/08/25/xmake-update-v2.7.1/">Xmake v2.7.1 发布，更好的 C++ Modules 支持</a></p>
        
    </div>

    <div class="nex">

        

        

        
        
        

        

        

        
        
        <p><strong>下一篇</strong> <a href="/cn/2022/11/08/xmake-update-v2.7.3/">Xmake v2.7.3 发布，包组件和 C++ 模块增量构建支持</a></p>
        
    </div>
</div>


        <h2 id="comments">评论</h2>
        









    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    内容
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#english">English</a></li>
                    <li><a href="#similar_posts">相关文章</a></li>
                    <li><a href="#comments">评论</a></li>
                </ul>
            </div>

            <!-- wwads -->
            
            <div class="side">
            <div class="wwads-cn wwads-vertical" data-id="243" style="max-width:255px;height:250px"></div>
            </div>
            

            <!-- baidu ads -->
            

            <br>
            <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    链接
                </div>
                <ul class="content-ul">
                  <li><a href="http://github.com/waruqi/tbox">tbox</a></li>
                  <li><a href="http://www.xmake.io">xmake</a></li>
                  <li><a href="https://github.com/waruqi">github</a></li>
                </ul>
            </div>

            <!-- xmake courses -->
            <br>
            <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    xmake 入门课程
                </div>
                <a href="https://xmake.io/#/zh-cn/about/course" target="_blank">
                <img src="/static/img/xmake-course.png" alt="course" width="256" height="193">
                </a>
            </div>

            <!-- qqgroup -->
            <br>
            <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    技术交流群（QQ）
                </div>
                <img src="/static/img/qqgroup.png" alt="qqgroup" width="256" height="284">
            </div>

            <!-- google ads -->
            

            <!-- baidu ads -->
            

        </div>
    </div>

    <!-- baidu ads -->
    
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>



    <footer class="site-footer">
    <div class="wrapper">
        <p class="description">
             Copyright (c) 2016-latest tboox.org 
        </p>
        <p class="contact">
            
            <a href="https://github.com/waruqi" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a> 
             
            
            <a href="mailto:waruqi@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a> 
            
            
            <a href="https://twitter.com/waruqi" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a> 
            
            <a href="/feed.xml" title="feed"><i class="fa fa-feed" aria-hidden="true"></i></a> 
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/Gaohaoyang">HyG</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
        </p>
    </div>
</footer>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
